define("wktrade:widget/ui/mvp/event/event.js",function(e,t,r){var i=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=function(){};i.extend(n.prototype,{listeners:{},on:function(e,t){return e&&t?(this.listeners[e]||(this.listeners[e]=new i.Callbacks("unique")),this.listeners[e].has(t)||this.listeners[e].add(t),this):!1},fire:function(e,t){var r=t||!1,n=new i.Deferred,s=this;try{s.listeners[e].fire(r),n.resolve()}catch(o){console.error(o),n.reject(),n.eorrEx=o}return n},off:function(e,t){var r=this.listeners[e];return t?(r.remove(t),this):void r.empty()}}),r.exports=n});
;define("wktrade:widget/ui/mvp/presenter/presenter.js",function(e,i,a){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=e("wktrade:widget/ui/mvp/model/model.js"),n=r.create({init:function(){this.initCashier()},defaultGoods:{vipcashier:{1:{type:"year",container:"year"},2:{type:"halfyear",container:"halfyear"}},eduvipcashier:{1:{type:"year",container:"year"},2:{type:"halfyear",container:"halfyear"}}},initCashier:function(){var e=this,i=window.lbscashier||{},a=function(){if(e.cashier.key=!0,e.PD.isFirst){var i;if(1===+e.PD.defaultGoodsId||2===+e.PD.defaultGoodsId)e.M.fire("choice:changeMember",e.defaultGoods[e.name][e.PD.defaultGoodsId]).then(function(){e.PD.isFirst=!1});else if(3===+e.PD.defaultGoodsId){var a=t(".choice-member .member-option-month3");e.M.fire("choice:selectMemberMenu",{$obj:a}).then(function(){e.PD.isFirst=!1})}else if(4===+e.PD.defaultGoodsId){if("vipcashier"===e.name)var a=t(".choice-member .member-option-month1Noble");else if("eduvipcashier"===e.name)var a=t(".choice-member .member-option-month1Normal");e.M.fire("choice:selectMemberMenu",{$obj:a}).then(function(){e.PD.isFirst=!1})}else 5===+e.PD.defaultGoodsId?(i=e.PD.defaultParams||{card:"classic",type:"year"},e.M.fire("gift:changeCards",i).then(function(){e.PD.isFirst=!1})):6===+e.PD.defaultGoodsId?(i=e.PD.defaultParams||{card:"share",type:"year"},e.M.fire("gift:changeCards",i).then(function(){e.PD.isFirst=!1})):7!==+e.PD.defaultGoodsId||e.PD.isMonthlyPay||0!==+e.PD.isShowContract?"giftcardscashier"===e.name||"giftcardsgototrade"===e.name?(i=e.PD.defaultParams||{card:"classic",type:"year"},e.M.fire("gift:changeCards",i).then(function(){e.PD.isFirst=!1})):(i=e.PD.defaultParams||{type:"year",container:"year"},e.M.fire("choice:changeMember",i).then(function(){e.PD.isFirst=!1})):e.M.fire("choice:changeMember",{type:"monthlyPay",container:"monthlyPay"}).then(function(){e.PD.isFirst=!1})}},r=[];if(1===+this.PD.isShowContract&&r.push("contract"),this.PD.isMonthlyPay&&("vipcashier"===e.name||"gototrade"===e.name&&17!==+e.PD.goodsType))e.cashier.key=!0,e.M.fire("choice:changeMember",{type:"year",container:"year"}),e.PD.isFirst=!1;else{this.cashier.obj=new i({onmessage:a,containerId:"lbscashier",tabNum:4,disabledChannel:r,hideDisabledChannel:1,payCheckUrl:e.URL.checkOrder,asycSubmit:1,samePage:1});var n=this.PD.initCashierUrl;console.log(n),this.cashier.obj.init(n)}},getData:function(e){return t.ajax({url:e,type:"get",cache:"false"})}});a.exports=n});
;define("wktrade:widget/ui/mvp/view/view.js",function(e,i,w){var r=(e("wkcommon:widget/ui/lib/jquery/jquery.js"),{});w.exports.view=r});
;define("wktrade:widget/cashier_header/cashier_header.js",function(e,n,t){var i=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),o=i.create({$el:null,E:{},init:function(){this.$el=s(".cashier-header-wrap").eq(0),this.initDomEvent(),this.addEventListener()},initDomEvent:function(){this.E.$userName=this.$el.find(".user-name"),this.E.$userInfoMenu=this.$el.find(".user-info-menu"),this.E.$contactUsBtn=this.$el.find(".contact-us-btn"),this.E.$contactUsInfo=this.$el.find(".contact-us-info")},addEventListener:function(){var e=this;this.E.$userName.hover(function(){e.E.$userInfoMenu.show()}),this.E.$contactUsBtn.hover(function(){e.E.$contactUsInfo.show()}),s(document).on("click",function(){e.E.$userInfoMenu.hide(),e.E.$contactUsInfo.hide()})}});t.exports=o});
;define("wktrade:widget/member_nav/member_nav.js",function(e,t,i){var a=e("wktrade:widget/ui/mvp/model/model.js"),n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=a.create({$el:null,E:{},init:function(){this.$el=n(".member-nav").eq(0),this.publishEvent()},publishEvent:function(){var e=this;this.M.on("nav:setCurNavTab",n.proxy(e.setCurNavTab,e))},setCurNavTab:function(e){e.type&&this.$el.find("."+e.type).addClass("cur").find("a").attr("href","javascript:;")}});i.exports=r});
;define("wktrade:widget/cashier_renew/cashier_renew.js",function(e,n,i){var t=e("wktrade:widget/ui/mvp/model/model.js"),h=e("wkcommon:widget/ui/lib/jquery/jquery.js"),s=t.create({$el:null,E:{},init:function(){this.$el=h(".cashier-renew").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$cashierRenewContent=this.$el.find(".cashier-renew-content")},publishEvent:function(){var e=this;this.M.on("renew:changeRenew",h.proxy(e.UIchangeRenew,e))},UIchangeRenew:function(){""!==this.PD.renewInfo&&null!==this.PD.renewInfo?(this.$el.show(),this.E.$cashierRenewContent.html(this.PD.renewInfo)):(this.$el.hide(),this.E.$cashierRenewContent.html(""))}});i.exports=s});
;define("wktrade:widget/cashier_special/cashier_special.js",function(e,i,h){var n=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=n.create({$el:null,E:{},init:function(){this.$el=s(".cashier-special-renew").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$cashierSpecial=this.$el.find(".cashier-special-item"),this.E.$cashierRenew=this.$el.find(".cashier-renew-item")},publishEvent:function(){var e=this;this.M.on("special:changeSpecial",s.proxy(e.UIchangeSpecial,e)),this.M.on("renew:changeRenew",s.proxy(e.UIchangeRenew,e)),this.M.on("check:specialrenew",s.proxy(e.checkSpecialRenew,e))},UIchangeSpecial:function(){""!==this.PD.specialInfo?(this.$el.show(),this.E.$cashierSpecial.show(),this.E.$cashierSpecial.html(this.PD.specialInfo)):(this.E.$cashierSpecial.hide(),this.E.$cashierSpecial.html(""))},UIchangeRenew:function(){""!==this.PD.renewInfo?(this.$el.show(),this.E.$cashierRenew.show(),this.E.$cashierRenew.find(".cashier-renew-content").html(this.PD.renewInfo)):(this.E.$cashierRenew.hide(),this.E.$cashierRenew.find(".cashier-renew-content").html(""))},checkSpecialRenew:function(){this.M.fire("renew:changeRenew"),this.M.fire("special:changeSpecial"),""===this.PD.specialInfo&&""===this.PD.renewInfo&&this.$el.hide()}});h.exports=c});
;define("wktrade:widget/cashier_user_info/cashier_user_info.js",function(e,i,r){var n=e("wktrade:widget/ui/mvp/model/model.js"),t=(e("wkcommon:widget/ui/lib/jquery/jquery.js"),n.create({$el:null,E:{},init:function(){}}));r.exports=t});
;define("wktrade:widget/cashier_vouchers/cashier_vouchers.js",function(e,c,h){var i=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),t=i.create({$el:null,E:{},selectedVoucher:null,init:function(){this.$el=s(".cashier-vouchers").eq(0),this.publishEvent(),this.initDomEvent(),this.addEventListener()},publishEvent:function(){var e=this;this.M.on("vouchers:getVouchers",s.proxy(e.getVouchers,e))},initDomEvent:function(){this.E.$vouchersName=this.$el.find(".vouchers-name"),this.E.$vouchersBar=this.$el.find(".vouchers-bar"),this.E.$vouchersMenu=this.$el.find(".vouchers-list-wrap"),this.E.$checkBtn=this.$el.find(".check-btn")},addEventListener:function(){var e=this;this.E.$vouchersBar.add(this.E.$vouchersName).on("click",function(c){c.stopPropagation(),e.E.$vouchersMenu.show()}),this.E.$checkBtn.click(function(){e.checkVoucherPrice()}),this.E.$vouchersMenu.on("click",".item",function(){var c=s(this).data("index"),h=e.PD.vouchers;e.selectedVoucher=h[c],e.PD.isVouchers=!0,e.setVoucher(e.PD.isVouchers)}),s(document).on("click",function(){e.E.$vouchersMenu.hide()})},setVoucher:function(e){var c=[this.formatPrice(this.selectedVoucher.voucher_price,0)+"\u5143",this.selectedVoucher.voucher_name,"\uff08\u6709\u6548\u671f\u81f3"+this.selectedVoucher.valid_time+"\uff09"].join("");this.E.$vouchersName.html(c),e&&(this.E.$checkBtn.prop("checked",!0),this.checkVoucherPrice())},checkVoucherPrice:function(){this.E.$checkBtn.prop("checked")?(this.PD.vouchersPrice=this.selectedVoucher.voucher_price,this.PD.isVouchers=!0,this.PD.isVoucherId=this.selectedVoucher.voucher_id):(this.PD.vouchersPrice=0,this.PD.isVouchers=!1),!this.PD.isFirst&&this.M.fire("price:checkprice")},resetVoucher:function(){this.E.$checkBtn.prop("checked",!1),this.PD.isVouchers=!1,this.PD.vouchersPrice=0},getVouchers:function(e){if(200===+e.goodsId)return s(".unable-vouchers").show(),this.$el.hide(),this.M.fire("exchange:hideExchange"),void(this.PD.isVouchers=!1);var c=this,h=["/cashier/interface/getvoucher?goods_id=",e.goodsId,"&goods_type=",e.goodsType,e.tradeId?"&trade_id="+e.tradeId:""].join("");s(".unable-vouchers").hide(),this.resetVoucher(),s.ajax({url:h,type:"get",async:!1,cache:!1}).done(function(h){var i=[],s=0;if(h&&0===h.status.code&&h.data.voucher_info&&h.data.voucher_info.length>0){var t=h.data.voucher_info;c.PD.vouchers=t,c.selectedVoucher=t[0];for(var o=t.length;o>s;s++){var r=c.formatPrice(t[s].voucher_price,0)+"\u5143";r+=t[s].voucher_name,r+="\uff08\u6709\u6548\u671f\u81f3"+t[s].valid_time+"\uff09",i.push('<li class="item" data-index="'+s+'">'),i.push('<a href="javascript:;" title="'+r+'">'),i.push(r),i.push("</a>"),i.push("</li>"),1===+t[s].is_selected&&(c.selectedVoucher=t[s],c.PD.isVouchers=!0)}c.$el.find(".vouchers-list-layout ul").html(i.join("")),c.setVoucher(c.PD.isVouchers),c.$el.show(),c.M.fire("exchange:hideExchange")}else"vipcashier"===c.PD.cashierName&&(c.$el.hide(),c.M.fire("exchange:showExchange").then(function(){c.M.fire("exchange:getExchanges",{type:"choice-member",goodsId:e.goodsId,goodsType:e.goodsType})}))})}});h.exports=t});
;define("wktrade:widget/cashier_sale_price/cashier_sale_price.js",function(i,e,t){var c=i("wkcommon:widget/ui/lib/jquery/jquery.js"),s=i("wktrade:widget/ui/mvp/model/model.js"),r=s.create({$el:null,E:{},init:function(){this.$el=c(".cashier-sale-price").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$actualPrice=this.$el.find(".actual-price"),this.E.$actualPriceDesc=this.$el.find(".actual-price-desc")},publishEvent:function(){var i=this;this.M.on("price:checkprice",c.proxy(i.checkSalePrice,i))},checkSalePrice:function(){var i=this,e="\u5143",t=this.PD.salePrice;if(this.cashier.key)if(this.cashier.key=!1,t-=this.PD.isVouchers===!0?this.PD.vouchersPrice:0,t-=this.PD.isOtherPrice===!0?this.PD.otherPrice:0,t=Number(t)+(this.PD.isDocPack===!0?Number(this.PD.docSalePrice):0),this.PD.actualPrice=t,this.E.$actualPrice.html(i.formatPrice(i.PD.actualPrice,2)),this.PD.savePrice=Number(this.PD.price)+Number(this.PD.docPrice)-this.PD.actualPrice,0!==this.PD.savePrice&&(e="\u5143\uff08\u8282\u7701"+i.formatPrice(this.PD.savePrice)+"\u5143\uff09"),this.E.$actualPriceDesc.html(e),this.PD.isMonthlyPay&&("vipcashier"===i.PD.cashierName||"gototrade"===i.PD.cashierName&&17!==+i.PD.goodsType))this.cashier.key=!0;else{var c=this.cashierInitUrl();this.cashier.obj.updateOrder(c)}}});t.exports=r});
;define("wktrade:widget/cashier_baifubao/cashier_baifubao.js",function(e,i,t){var n=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),a=n.create({$el:null,E:{},init:function(){this.$el=s(".cashier-baifubao-agreement").eq(0),console.log("baifubao-agreement!"),this.initDomEvent(),this.addEventListener()},initDomEvent:function(){this.E.$agreementCheckbox=this.$el.find(".agreement-checkbox"),this.E.$mark=this.$el.find(".cashier-baifubao-mark"),this.E.$lbscashier=this.$el.find(".lbscashier")},addEventListener:function(){var e=this;this.E.$agreementCheckbox.on("click",function(){e.checkIsAgreement()})},checkIsAgreement:function(){this.E.$agreementCheckbox.prop("checked")?(this.PD.isAgreement=!0,this.E.$mark.hide()):(this.PD.isAgreement=!1,this.E.$mark.show())}});t.exports=a});