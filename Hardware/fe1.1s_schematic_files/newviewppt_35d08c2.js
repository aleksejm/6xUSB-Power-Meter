define("wkview:widget/html_view_new/ppt/main.js",function(e,t,i){var o=e("wkview:widget/ui/html_view/ppt/ppt.js").PPT,n=e("wkview:widget/ui/html_view/slider/slider.js").Slider,r=e("wkcommon:widget/lib/tangram/base/base.js"),a=e("wkcommon:widget/ui/lib/jquery/jquery.js"),s=(e("wkcommon:widget/ui/js_core/eventCenter/eventCenter.js").eventCenter,e("wkview:widget/html_view/html_reader/js/share.js").share),d=e("wkview:widget/ui/view/doc_share/doc_share.js"),g=e("wkview:widget/html_view/html_reader/js/config.js").config,l=e("wkcommon:widget/ui/js_core/util/util.js"),w=e("wkcommon:widget/lib/fis/data/data.js"),p=e("wkcommon:widget/ui/js_core/log/log.js");i.exports.main=function(e){var t=6===r.browser.ie||7===r.browser.ie,i=function(){var e=r.page,i=0,o=e.getWidth();if(o>=1200)i=964;else{if(!(o>=980))return!1;i=o-250}a("#reader-container").css("width",i),t?a(".ui-toolbar").css("width",i-18):a(".ui-toolbar").css("width",i);var n=~~u.options.width,s=~~u.options.height,d=0;d=n>i?i-20:n;var g=d/n,l=s*g;u.resize(d,l),r.lang.eventCenter.dispatchEvent("Reader.zoomChange")},c=w.get("WkInfo").DocInfo,u=new o({el:e.pptEl,id:e.id,width:e.width,payprice:~~c.payPrice/100});u.on("firstRender",function(){var o,l=new n({el:e.sliderEl,orientation:"horizontal",direction:"forward",countPn:u.options.countPn,freeNum:u.options.freeNum});if(!t){var w=new s;w.loadData(),a(".ui-toolbar-left").append(w.$el[0]),g.shareElId="shareMore-ppt";var h=d.shareToCreate({el:r.dom.q("reader-tools-share")[0],view:"viewReader-ppt",copy:"copyCode-ppt",panel:"panel-ppt",closePanel:"closePanel-ppt",toggleSize:["normalSize-ppt","bigSize-ppt"],codeText:"readerCode-ppt",copyResult:"copyResult-ppt"});h.show()}l.on("change",function(e){var t=u.getDataLength()-1,i=Math.ceil(t*e.value);o=i,i+=1,l.setThumbs("\u7b2c"+i+"\u9875"),l.setIpt(i),l.setCurPage(i)}),l.on("gotopage",function(){o=l.getCurPage(),l.fire("onslidestop")}),l.on("onslidestop",function(){u.gotoPage(o),u.setCurrentPage(l.getCurPage())}),l.on("nextbtn",function(){a(".ppt-arrow-right").trigger("click")}),l.on("prevbtn",function(){a(".ppt-arrow-left").trigger("click")}),l.on("closeTrade",function(){u.fire("closeTrade")}),l.on("goToTrade",function(){u.fire("goToTrade")}),u.on("next",function(){o=u.getCurrentPage();var e=u.getDataLength(),t=((o-1)/e).toFixed(4);l.setCurPage(o),l.setValue(t),l.thumbsHide()}),u.on("prev",function(){o=u.getCurrentPage();var e=u.getDataLength(),t=((o-1)/e).toFixed(4);l.setCurPage(o),l.setValue(t),l.thumbsHide()}),i(),c&&"cqvip"===c.org_engName?p.xsend(1,100780,{index:1}):c&&1===~~c.hasImage&&-1===c.title.indexOf("\u56fe")&&p.xsend(1,100780,{index:2})}),l.windowResize(i)}});
;define("wkview:widget/ui/html_view/ppt/control.js",function(t,e,i){var n=t("wkview:widget/ui/html_view/widget.js").widget,o=t("wkview:widget/ui/html_view/preloadImg.js").preloadImg,s=t("wkcommon:widget/lib/fis/data/data.js"),r=t("wkview:widget/ui/view/pay_org_vip/pay_org_vip.js"),h=n({Options:{countPn:1},elements:{"@content":"$content","@arrow-left":"$arrowLeft","@arrow-right":"$arrowRight","@loading":"$loading","@go-to-trade":"$goToTrade","@flash-pay-btn":"$flashPayBtn"},events:{"$arrowRight click":"next","$arrowLeft click":"prev","$flashPayBtn click":"goPay"},_init:function(){this.currentPn=1,this.firstRender=!0,this.lock=!1},_initEvents:function(){var t=this;t.on("onsetContentAfter",function(){t.firstRender&&t.fire("firstRender"),t.firstRender=!1,t.lock=!1})},next:function(){return this.currentPn>=this.options.freeNum?(this.fire("goToTrade"),!1):this.currentPn>=this.options.countPn||this.lock?!1:(this.currentPn++,void this.fire("next",this.currentPn))},prev:function(){return this.currentPn<=1||this.lock?!1:void(this.options.trade?this.fire("closeTrade"):(this.currentPn--,this.fire("prev",this.currentPn)))},goPay:function(){var t=r({goods_type:1,goods_id:s.get("WkInfo").DocInfo.docId||0});t.init({query:{fr:"html_view",q:"paybtn_page",pn:s.get("WkInfo").DocInfo.totalPageNum||0,click_type:"13011002",dqStatCode:"31_8_32_33"}})},_getContentImg:function(){var t=this.$elements.$img;return t&&t.length>0?t:(t=$(this.$elements.$content.find("img")),t.length<1&&(t=$("<img />"),t.appendTo(this.$elements.$content)),this.$elements.$img=t,t)},setContent:function(t){var e=this,i=this._getContentImg(),n=e.$elements.$loading;e.lock=!0,e.timeLock="",o({src:t,onload:function(o){e.firstRender&&(e._setImgSize(o),e.options.el.show()),clearTimeout(e.timeLock),i.attr("src",t),e.fire("setContentAfter"),i.css("opacity",1),n.hide()},loading:function(){e.firstRender||(i.css("opacity",0),e.timeLock=setTimeout(function(){n.show()},200))}})},_setImgSize:function(t){var e=this,i=0,n=0,o=0;e.options.isFullSize?(o=e.options.height/t.height,i=t.width*o,e.options.width=i,n=e.options.height):(i=t.width>=1080?e.options.width=932:e.options.width,o=e.options.width/t.width,n=t.height*o,e.options.height=n),e.scale=o,e.resize(i,n)},resize:function(t,e){var i=this._getContentImg();i.width(t).height(e),this.$elements.$arrowLeft.height(e),this.$elements.$arrowRight.height(e)},getCurrentPage:function(){return this.currentPn},setCurrentPage:function(t){return t>this.options.countPn||1>t||this.lock?!1:void(this.currentPn=t)},goToTrade:function(){var t=this.$elements.$goToTrade,e=this._getContentImg();e.css("opacity",0),t.show(),this.options.trade=!0},closeTrade:function(){if(this.options.trade){var t=this.$elements.$goToTrade,e=this._getContentImg();e.css("opacity",1),t.hide(),this.options.trade=!1}}},{type:"PPT_CONTROL"});i.exports.Control=h});
;define("wkview:widget/ui/html_view/ppt/data.js",function(e,t,i){var a=e("wkcommon:widget/ui/lib/jquery/jquery.js"),_=e("wkcommon:widget/ui/lib/lang/lang.js"),n="http://wenku.baidu.com",c="/browse/getbcsurl?doc_id=__DOC_ID__&pn=1&rn=__RN__&type=ppt&callback=?",l=_.createClass(function(e){this.id=e,this.cache=null}).extend({getData:function(){var e=this;return e.api=c.replace(/__DOC_ID__/g,e.id).replace(/__RN__/g,99999),a.getJSON(n+e.api)}});i.exports.Data=l});
;define("wkview:widget/ui/html_view/ppt/ppt.js",function(t,n,e){var o=t("wkview:widget/ui/html_view/widget.js").widget,i=t("wkview:widget/ui/html_view/ppt/control.js").Control,a=t("wkview:widget/ui/html_view/ppt/data.js").Data,s=t("wkview:widget/ui/html_view/preloadImg.js").preloadImg,r=t("wkview:widget/ui/html_view/dep/string/string.js"),p=t("wkcommon:widget/lib/fis/data/data.js"),c=o({Options:{id:null,width:750,height:null,isFullSize:!1},_init:function(){var t=this;t.tmpl='<div class="mod ppt-mod">\n    <div js-hook="content" class="bd ppt-bd"></div>\n    <div js-hook="loading" class="loading"></div> \n    <div js-hook="go-to-trade" class="go-to-trade">\n        <p class="tip">\u8bd5\u8bfb\u5df2\u7ecf\u7ed3\u675f\uff0c\u5982\u679c\u9700\u8981\u7ee7\u7eed\u9605\u8bfb\u6216\u4e0b\u8f7d\uff0c\u656c\u8bf7\u8d2d\u4e70</p>\n        <p class="price">&#65509;#{payPrice}\u5143</p>\n        <div>\n            #{payInsert}\n            <a href="###" js-hook="flash-pay-btn" class="flash-pay-btn #{btnType}">\n                <b class="ui-bz-btn-p-16 ui-bz-btc">\u8d2d\u4e70</b>\n            </a>\n        </div>\n    </div>\n    <div onselectstart="return false;" js-hook="arrow-left" class="ppt-arrow-left">\n        &nbsp;&nbsp;\n    </div>\n    <div onselectstart="return false;" js-hook="arrow-right" class="ppt-arrow-right">\n        &nbsp;&nbsp;\n    </div>\n</div>\n';var n='<a href="/cashier/browse/vipwithdoccashier?doc_ids=[&quot;__DOCID__&quot;]&amp;dqStatCode=31_35_36" class="ui-bz-btn"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8d2d\u4f1a\u5458\u672c\u6587\u514d\u8d39</b></a>',e=p.get("WkInfo").DocInfo,o=0;o=e.vip_type&&e.is_discount_doc?~~e.vip_price/100:t.options.payprice,1!==e.ispaied&&e.isPaymentDoc&&(!e.vip_type||0===e.vip_type)&&0===e.edu_vip_type&&e.payPrice<=500?(n=n.replace("__DOCID__",e.docId),t.tmpl=r.format(t.tmpl,{payPrice:o,payInsert:n,btnType:"ui-bz-btn-senior"})):t.tmpl=r.format(t.tmpl,{payPrice:o,payInsert:"",btnType:"ui-bz-btn"}),t.data=new a(t.options.id),t.dataCache=null,t.fire("onload")},_initEvents:function(){var t=this;i.prototype._initEvents.call(t),t.data.on("error",function(){console.error("\u6570\u636e\u8bf7\u6c42\u9519\u8bef")}),t.on("onload",function(){t._getData()}),t.on("next",function(){var n=t.currentPn;t.setContent(t.dataCache[n-1].zoom)}),t.on("prev",function(){var n=t.currentPn;t.setContent(t.dataCache[n-1].zoom)}),t.on("getDataAfter",function(){t.setContent(t.dataCache[0].zoom)}),t.on("ondispose",function(){t.data.dispose()}),t.on("setContentAfter",function(){var n=t.currentPn;return n>=t.options.countPn?!1:void t._preload(t.dataCache[n].zoom)}),t.on("goToTrade",function(){t.goToTrade()}),t.on("closeTrade",function(){t.closeTrade()})},_render:function(){this.$el.html(this.tmpl)},_getData:function(){var t=this;t.data.getData().done(function(n){n.count&&(t.dataCache=n.list,t.options.countPn=n.count,n.free=~~n.free,n.count=~~n.count,t.options.freeNum=n.ispay?n.free:n.free+1),t.fire("getDataAfter",n)})},_preload:function(t){s({src:t})},getDataLength:function(){return this.dataCache.length},gotoPage:function(t){this.setContent(this.dataCache[t-1].zoom),this.currentPn=~~t}},{superClass:i,type:"PPT"});e.exports.PPT=c});
;define("wkview:widget/ui/html_view/preloadImg.js",function(o,r,n){var e=function(o){if(!o.src)return!1;var r=new Image,n=function(n){return function(){r.onload=r.onerror=r.onabout=null,n(r,o)}};return o.loading&&o.loading(o),o.onload&&(r.onload=n(o.onload)),o.onerror&&(r.onerror=r.onabout=n(o.onerror)),r.src=r.originalSrc=o.src,r};n.exports.preloadImg=e});
;define("wkview:widget/ui/html_view/widget.js",function(t,e){var n=t("wkcommon:widget/ui/lib/object/object.js"),i=t("wkcommon:widget/ui/lib/lang/lang.js"),s=t("wkcommon:widget/ui/lib/array/array.js"),o=t("wkcommon:widget/ui/js_core/util/util.js"),r=function(){},a=o.mix,l=function(t,e){e=a(e||{},{prefix:"widget",type:"",superClass:i.Class});var n=e.superClass,o=n.prototype;t=a(t||{},{el:o.el||"",elements:o.elements||{},events:o.events||{},Options:o.Options||{}});var u=function(n){var o=this,r=arguments;n=n||{},o.$el=null,o.$elements={},o.options=a(t.Options,n,!0),o.type=e.type,o.prefix=e.prefix,o._created=!1,o._disabledStatus=!1,o.on("onload",function(){o._created=!0,o._disabledStatus=!0,(!o.$el||o.$el.length<1)&&(o.$el=$(o.options.el)),o.$el.data(o.prefix,this);var t=o.$el.data(o.prefix+"-options");o.options=a(o.options,t,!0),o.refreshElements(),o._bindEvents(o.events)}),i.isFunction(o._init)&&o._init.apply(o,r),u.$$plugins&&s.each(u.$$plugins,function(t){t.apply(o,r)}),o.$el=$(o.options.el),i.isFunction(o._render)&&(o._render(),o._initEvents()),setTimeout(function(){o.fire("onload")},16)};i.inherits(u,n);var p=i.isFunction(t._init)?t._init:r,d=n===i.Class?i.Class:o._init;return t._init=function(){var t=arguments,e=this;i.isFunction(d)&&d.apply(e,t),i.isFunction(p)&&p.apply(e,t)},u.extend(a(t,l._method)),u};l._method={_bindEvents:function(t){var e=this;return t=t||e.events,i.isObject(t)?void n.each(t,function(t,n){var i,s,o,r=n.split(/\s+/);if(!(t in e))throw new Error("\u7f3a\u5c11"+t+"\u4e8b\u4ef6\u51fd\u6570");switch(r.length){case 3:i=e.$elements[r[0]],s=r[1],o=r[2];break;case 2:r[0].match(/^\$/)?(i=e.$elements[r[0]],s=r[1]):(i=e.$el,s=r[0],o=r[1]);break;case 1:i=e.$el,s=r[0]}o?e.bindEvent(i,s,o,t):e.bindEvent(i,s,t)}):!1},bindEvent:function(t,e,n,o){var r=this,a=arguments,l=r.type;return 3===a.length&&(o=n,n=null),i.isString(o)&&(o=r[o]),o=$.proxy(o,r),e=e.split(","),e=s.map(e,function(t){return t+"."+l}),e=e.join(" "),n?$(t).on(e,n,o):$(t).on(e,o),this},unBindEvent:function(t,e,n,o){var r=this,a=arguments,l=r.type;3===a.length&&(o=n,n=null),i.isString(o)&&(o=r[o]),o=$.proxy(o,r),e=e.split(","),e=s.map(e,function(t){return t+"."+l}),e=e.join(" "),n?$(t).off(e,n,o):$(t).off(e,o)},dispose:function(){var t=this,e=t.type;t.$el.off("."+e),t.$el.find("*").off("."+e),t.$el.removeData(t.prefix+"-options"),t.fire("ondispose")&&i.Class.prototype.dispose.call(t)},_setStatus:function(t){return t?(this._disabledStatus=!0,this.$el.addClass(this.type+"-disabled ui-state-disabled")):(this._disabledStatus=!1,this.$el.removeClass(this.type+"-disabled ui-state-disabled")),this},setDisable:function(){return this._setStatus(!0),this.fire("disable"),this},setEnable:function(){return this._setStatus(!1),this.fire("enable"),this},getStatus:function(){return this._disabledStatus},refreshElements:function(t){var e,n,i,s=this,o=t||s.elements,r=[];for(e in o)o.hasOwnProperty(e)&&(n=o[e],i=e.match(/^@([-_\w]+)/),r.push(i&&i.length>1?s.$elements[n]=s.getHookElement(i[1]):s.$elements[n]=$(e,this.$el)));return r},getData:function(t){var e=this,n=e.prefix,i=e.$el.data(n+"-options");return i.hasOwnProperty(t)?i[t]:null},setData:function(t,e){var n=this,i=n.prefix,s=n.$el.data(i+"-options")||{};return s[t]=e,n.$el.data(i+"-options",s),n},getHookElement:function(t){return $("[js-hook="+t+"]",this.$el)}},e.widget=l;var u=function(t,e,n){var i,s=t.$$plugins||(t.$$plugins=[]);s[s.length]=e;for(i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i])};e.register=u});
;define("wkview:widget/html_view/html_reader/js/config.js",function(e,d,a){var o=(e("wkcommon:widget/lib/tangram/base/base.js"),e("wkcommon:widget/ui/js_core/util/util.js"),{bodySelector:"#bd .body",zoomRange:[.5,1.5],zoomStep:.1,addChangeEl:"#bd .body",decreaseChangeEl:"#bd .reader-container",bStyleChangeEl:"#bd .doc-style-b.doc-main",pageEl:"#bd .reader-page",ftEl:"#bd .main .ft",aside:"#bd .aside",pageDefaultWidth:715,pageStep:50});a.exports.config=o});
;define("wkview:widget/html_view/html_reader/js/setting.js",function(e,t,i){var n=(e("wkcommon:widget/lib/tangram/base/base.js"),e("wkcommon:widget/ui/js_core/util/util.js"),{currentZoomLevel:1,currentPage:1,zoomLevel:1,isFullScreen:!1});i.exports.setting=n});
;define("wkview:widget/html_view/html_reader/js/toolsBar.js",function(e,t,i){var n=e("wkcommon:widget/lib/tangram/base/base.js"),s=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,r=e("wkcommon:widget/ui/js_core/util/util.js"),a=e("wkview:widget/html_view/html_reader/js/config.js").config,l=e("wkview:widget/html_view/html_reader/js/setting.js").setting,d=e("wkcommon:widget/lib/fis/data/data.js"),o=d.get("WkInfo"),c=n.dom,v=c.q,f=!1,h=!0,g=!1,w=s({Options:{readerContainer:{},reader:{},items:[]},_init:function(){var e=this,t=d.get("isHitVipDocLimited");e.template=['<div class="reader-tools-bar-wrap ugctest">','<div class="reader-tools-bar">','<div class="left"></div>','<span id="share-tips" class="fenxiang"><span class="close fenxiang"></span></span>','<div class="right"></div>','<div class="center"><div class="centerLeft"></div><div class="centerRight"></div></div>',"</div>","</div>"].join(""),e.wrapEl=r.createDom(e.template),e.bodyEl=n.dom.query(a.bodySelector)[0],e.asideEl=n.dom.query(a.aside)[0],e.asideWidth=e.asideEl.offsetWidth+34,e.el=v("reader-tools-bar",e.wrapEl,"div")[0],e.left=v("left",e.el,"div")[0],e.right=v("right",e.el,"div")[0],e.center=v("center",e.el,"div")[0],e.close=c.q("fenxiang",e.el,"span")[1],e.items.length&&e._initItem(),o.DocInfo.isApi||document.body.appendChild(e.wrapEl),e.fire("onload"),e.bindEvent(),t&&$(".reader-tools-bar").find(".right").addClass("right-vip-auto")},_initItem:function(){var e=0,t=this,i=t.items,n=i.length;for(t.list=[],n;n>e;e++)t.addItem(i[e])},bindEvent:function(){var e=this,t=$(".reader-tools-bar").find(".reader-back2top-wrap");e.on("itemChange",function(t,i){var n=i.target,s=0,r=e.list,a=r.length;for(a;a>s;s++)n!==r[s]&&(r[s].status="disabled")}),$(window).on("scroll",function(){var e=$(window).scrollTop();200>e?t.css("display","none"):t.css("display","block")}),n.event.on(e.close,"click",function(){$(this).parent().hide()}),n.event.on(e.wrapEl,"mouseenter",function(){h=!1}),n.event.on(e.wrapEl,"mouseleave",function(){h=!0,f&&e.resize()}),n.event.on(e.el,"click",function(e){var t=n.event.getTarget(e);itemAttr=n.dom.getAttr(t,"data-toolsBar-log"),itemAttr&&n.lang.eventCenter.dispatchEvent("ReaderToolsBar.itemClick",{name:itemAttr,el:t,setting:l})}),n.lang.eventCenter.addEventListener("InFullScreen.after",n.fn.bind(e.resizeFullScreen,e)),n.lang.eventCenter.addEventListener("OutFullScreen.after",n.fn.bind(e.resize,e)),n.lang.eventCenter.addEventListener("Reader.fullScreenResize",n.fn.bind(e.resizeFullScreen,e))},addItem:function(e){if(n.lang.isFunction(e)){var t=this,i=new e({readerContainer:t.readerContainer,toolsBar:t,reader:t.reader,status:"disabled"}),s=i.position,r=v(s,t.el,"div")[0];i.el&&r.appendChild(i.el),t.list.push(i)}},resizeFullScreen:function(){var e=this;e.el.style.width="100%",e.el.offsetWidth<860&&(e.el.style.width="860px"),n.lang.eventCenter.dispatchEvent("ToolsBar.resize",{isMax:!0}),e.resizeCenter()},resizeCenter:function(){var e=this,t=e.center,i=e.el.offsetWidth-e.asideWidth;900>i?(e.right.style.display="none",t.style.width=e.el.offsetWidth+"px"):(e.right.style.display="",t.style.width=i+"px")},resize:function(){var e=this;h?(n.lang.isFunction(g)||(g=r.debounce(e._resizeFunc,300,e)),g()):f=!0},_resizeFunc:function(e){var t=this;if(e=e||{},!l.isFullScreen){if(!h)return void(f=!0);{var i=n.page.getViewWidth(),s=e.bodyElWidth||t.bodyEl.offsetWidth;e.readerWidth,t.asideEl.offsetWidth}if(s>=i){var r=i-2;r=970>r?970:r,t.el.style.width=r+"px",n.lang.eventCenter.dispatchEvent("ToolsBar.resize",{isMax:!0})}else t.el.style.width=s+"px",n.lang.eventCenter.dispatchEvent("ToolsBar.resize",{isMax:!1});t.el.style.overflow="hidden",t.resizeCenter(),t.el.style.overflow="",f=!1}}});i.exports.toolsBar=w});
;define("wkview:widget/html_view/html_reader/js/toolsItem.js",function(t,e,a){var i=t("wkcommon:widget/lib/tangram/base/base.js"),o=t("wkcommon:widget/ui/js_core/widget/widget.js").widget,s=t("wkcommon:widget/ui/js_core/util/util.js"),l=o({Options:{el:{},status:"disabled",toolsBar:{},position:"left",reader:{},readerContainer:{}},_init:function(){var t=this;i.lang.isString(t.el)&&(t.el=s.createDom(t.template)),t.on("onload",function(){i.event.on(this.el,"click",function(){t.status="active",t.toolsBar&&t.toolsBar.fire("itemChange",{target:t})}),t._asyncCallBack=t.asyncCallBack,t.asyncCallBack=function(){if(console.log(t.status),"disabled"!==t.status){var e=[].slice.call(arguments,0);t._asyncCallBack.apply(t,e)}}})},resize:function(){},asyncCallBack:function(){}},{type:"toolsItem"});a.exports.toolsItem=l});
;define("wkview:widget/html_view/html_reader/js/toolsTip.js",function(e,t,i){var n,o=e("wkcommon:widget/lib/tangram/base/base.js"),s=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/util/util.js"),l=(e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,s({Options:{template:['<div class="mod ui-panel trg-br reader_tools_tips tools-tips">','<div class="tips-wrap">','<span class="trangle"></span>','<div class="inner">','<div class="hd">','<span class="act"><a href="###" class="ir close reader_tips_close">\u03a7</a></span>',"</div>",'<div class="bd reader_tools_tips_content_wrap">',"</div>","</div>","</div>","</div>"].join(""),className:"tools-tips",closerEl:"close"},_init:function(){var e=this;e.el=a.createDom(e.template),e.hideEl=a.createDom('<div id="tip-gc" style="display:none;"></div>'),document.body.appendChild(e.hideEl),e.inner=o.dom.q("reader_tools_tips_content_wrap",e.el,"div")[0],o.dom.hide(e.el),a.zIndexManger.bringToFront(e.el),e.isHide=!0,e.bindEvent()},bindEvent:function(){var e=this;o.event.on(e.el,"click",function(t){var i=o.event.getTarget(t);o.dom.hasClass(i,"reader_tips_close")&&(o.event.preventDefault(t),document.body.focus(),e.hide()),o.dom.hasAttr(i,"data-btn-event")&&o.lang.eventCenter.dispatchEvent(o.dom.getAttr(i,"data-btn-event"))});var t=Math.max,i=Math.min;a.delegate(document,".reader-tools-btn-wrap","blur",function(n){if(e.parent)if(o.browser.ie){var s=window.event.toElement,a=o.dom.contains(e.parent,s);if(!a){var l=e.el,d=o.page.getMousePosition(),r=o.dom.getPosition(l),c=l.offsetWidth,p=l.offsetHeight,m=t(r.left,d.x)<=i(r.left+c,d.x)&&t(r.top,d.y)<=i(r.top+p,d.y);m?e.parent.focus():e.hide()}}else setTimeout(function(){var t=n.explicitOriginalTarget||document.activeElement,i=o.dom.contains(e.parent,t);i||t===e.parent||e.hide()},0)})},bindFocusout:function(){},unFocusout:function(){},focusoutCallBack:function(){},show:function(e){var t=this;t.clear(),e.className&&(o.dom.removeClass(t.el,t.options.className),o.dom.addClass(t.el,e.className),t.currentClassName=e.className),t.dispose=e.dispose?!0:!1,a.mix(this.options,e,!0),t.inner.appendChild(t.options.contentEl),t.parent=t.options.parent,t.options.parent.appendChild(t.el),o.lang.eventCenter.dispatchEvent("ToolsTipShow.before",{tip:t}),o.dom.show(t.el),o.lang.eventCenter.dispatchEvent("ToolsTipShow.after",{tip:t}),t.el.focus()},clear:function(){var e=this,t=!1;if(e.inner.children.length&&(t=e.inner.children[0],e.hideEl.appendChild(t),o.lang.eventCenter.dispatchEvent("toolsTip.gc",{el:t,className:e.currentClassName})),e.dispose&&t&&(o.dom.remove(t),o.browser.ie&&o.browser.ie<8)){var i=o.dom.create("div");i.appendChild(t),i.innerHTML="",i=null}},hide:function(){var e=this;o.dom.hide(e.el)}},{type:"toolsTip"})),d=function(){return n||(n=new l),n};i.exports.toolsTip=l,i.exports.toolsTipCreater=d});
;define("wkview:widget/html_view/html_reader/js/bookmark.js",function(o,e,t){var i,a,s=o("wkcommon:widget/lib/tangram/base/base.js"),r=o("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=o("wkcommon:widget/ui/js_core/util/util.js"),d=o("wkcommon:widget/ui/js_core/log/log.js"),l=o("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,k=o("wkview:widget/html_view/html_reader/js/config.js").config,m=o("wkcommon:widget/ui/js_core/login/login.js").login,c=o("wkview:widget/html_view/html_reader/js/setting.js").setting,v=o("wkview:widget/html_view/html_reader/js/toolsTip.js").toolsTip,w=o("wkcommon:widget/lib/fis/data/data.js"),u=w.get("WkInfo"),f=0,g='<div class="addBookmark-fail">\u8be5\u6587\u6863\u4e3a\u79c1\u6709\u6587\u6863\uff0c\u6682\u65e0\u6cd5\u4f7f\u7528\u4e66\u7b7e\u529f\u80fd\u3002</div>',h='<div class="addBookmark-success"><b class="ic ic-addBoomark-success"></b>\u6dfb\u52a0\u4e66\u7b7e\u6210\u529f\uff0c\u53ef\u4ee5\u8fdb\u5165\u6211\u4e66\u623f\u4e2d\u67e5\u770b<a target="_blank" href="/room">&gt;&gt;\u70b9\u51fb\u67e5\u770b</a></div>',b='<div class="addBookmark-success"><b class="ic ic-addBoomark-success"></b>\u6dfb\u52a0\u4e66\u7b7e\u6210\u529f\uff01<br/>\u65b0\u6dfb\u52a0\u7684\u4e66\u7b7e\u5c06\u8986\u76d6\u4e4b\u524d\u7684\u4e66\u7b7e\u3002<a target="_blank" href="/room">&gt;&gt;\u70b9\u51fb\u67e5\u770b</a></div>',p='<div class="addBookmark-fail">\u6dfb\u52a0\u4e66\u7b7e\u5931\u8d25\uff0c\u8bf7\u60a8\u7a0d\u540e\u91cd\u65b0\u5c1d\u8bd5\uff01</div>',j=r({Options:{position:"left"},_init:function(){var o=this,e=['<a class="ic reader-bookmark" title="\u4e66\u7b7e" href="###" data-toolsBar-log="bookmark" alog-action="htmltoolbar.bookmark"></a>'].join("");o.el=n.createDom(e),c.bookmark=k.bookmark,o.bindEvent()},bindEvent:function(){var o=this;s.event.on(o.el,"click",function(e){if(s.event.preventDefault(e),d.xsend(1,100033),k.isPrivate)return void o.showTip(g);if(!s.dom.hasClass(this,"isBookmark")){var t=c.currentPage,i=1;o.addBookmark(t,i)}}),s.lang.eventCenter.addEventListener("Reader.scroll",s.fn.bind(o.btnStatus,o)),s.lang.eventCenter.addEventListener("ToolsTipShow.before",function(){i&&i.hide()})},toolsTipCreater:function(){if(!i){var o=this;i=new v,s.event.on(i.el,"mouseenter",function(){clearTimeout(f)}),s.event.on(i.el,"mouseleave",function(){o.tipHide()})}return i},btnStatus:function(){var o=this,e=c.currentPage;return c.bookmark?(o.hasBookmark=!0,void(c.bookmark[0]===e?(s.dom.addClass(o.el,"isBookmark"),s.dom.setAttr(o.el,"title","")):(s.dom.removeClass(o.el,"isBookmark"),s.dom.setAttr(o.el,"title","\u4e66\u7b7e")))):(s.dom.removeClass(o.el,"isBookmark"),void(o.hasBookmark=!1))},addBookmark:function(o,e){var t=this;m.checksynch(s.fn.bind(t.addCallBack,t,o,e))},addCallBack:function(o,e){var t=this;a=o,s.ajax.post(u.Urls.submitBookmark,["ct=20109","doc_id="+k.doc_id,"page="+o,"offset="+e].join("&"),s.fn.bind(t.addCallBackAfter,t))},addCallBackAfter:function(o,e){var t=this,i=s.json.parse(e);i.save?(c.bookmark=[a,1],t.showTip(t.hasBookmark?b:h)):t.showTip(p)},showTip:function(o){var e=this,t=e.toolsTipCreater();clearTimeout(f),t.show({contentEl:n.createDom('<div class="bookmark-tip-content">'+o+"</div>"),parent:e.el.parentNode,className:"tools-bookmark-tip",dispose:!0}),e.tipHide(),e.btnStatus()},tipHide:function(){f=setTimeout(function(){i.hide()},3e3)}},{superClass:l});t.exports.bookmark=j});
;define("wkview:widget/html_view/html_reader/js/zoom.js",function(e,o,t){var a=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),d=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,i=e("wkcommon:widget/ui/js_core/util/util.js"),l=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,s=e("wkview:widget/html_view/html_reader/js/config.js").config,r=e("wkview:widget/html_view/html_reader/js/setting.js").setting,m=e("wkcommon:widget/lib/fis/data/data.js"),c=m.get("WkInfo").DocInfo.isApi,h=d({Options:{position:"left",zoomLevel:1},_init:function(){var e=this,o=['<div class="reader-tools-zoom xllDownloadLayerHit_left">','<a href="###" class="ic zoom-decrease" title="\u7f29\u5c0f" data-toolsBar-log="zoomout" alog-action="htmltoolbar.zoomout"></a>','<a href="###" class="ic zoom-add" title="\u653e\u5927" data-toolsBar-log="zoomin" alog-action="htmltoolbar.zoomin"></a>',"</div>"].join("");e.el=i.createDom(o),e.zoomDecreaseEl=a.dom.q("zoom-decrease",e.el,"a")[0],e.zoomAddEl=a.dom.q("zoom-add",e.el,"a")[0],e.zoomLevel=r.zoomLevel,e.decreaseChangeEl=a.dom.query(s.decreaseChangeEl)[0],e.addChangeEl=a.dom.query(s.addChangeEl)[0],e.bStyleChangeEl=a.dom.query(s.bStyleChangeEl)[0],e.asideWidth=a.dom.query(s.aside)[0].offsetWidth+34,e.baseWidth=980,e.resizeTimer=null,e.btnStatus(),c?e.asideWidth=0:e.bindEvent(),e.pageFlow(),1!==e.zoomLevel&&e.zoomChange(e.zoomLevel)},btnStatus:function(){var e=this;s.zoomRange[0]===r.currentZoomLevel?e.zoomDecreaseDisable():(a.dom.removeClass(e.zoomDecreaseEl,"zoom-decrease-disable"),a.dom.setAttr(e.zoomDecreaseEl,"title","\u7f29\u5c0f")),s.zoomRange[1]===r.currentZoomLevel?e.zoomAddDisable():(a.dom.removeClass(e.zoomAddEl,"zoom-add-disable"),a.dom.setAttr(e.zoomAddEl,"title","\u653e\u5927"))},zoomAddDisable:function(){var e=this;a.dom.addClass(e.zoomAddEl,"zoom-add-disable"),a.dom.setAttr(e.zoomAddEl,"title","")},zoomDecreaseDisable:function(){var e=this;a.dom.addClass(e.zoomDecreaseEl,"zoom-decrease-disable"),a.dom.setAttr(e.zoomDecreaseEl,"title","")},bindEvent:function(){var e=this;a.event.on(e.zoomDecreaseEl,"click",a.fn.bind(e.zoomDecrease,e)),a.event.on(e.zoomAddEl,"click",a.fn.bind(e.zoomAdd,e)),a.lang.eventCenter.addEventListener("InFullScreen.before",function(){e.zoomChange(1),e.zoomAddDisable(),e.zoomDecreaseDisable()}),a.lang.eventCenter.addEventListener("InFullScreen.after",function(){e.reader.setZoom(a.dom.q("bd",e.readerContainer.el)[0].offsetWidth)}),a.lang.eventCenter.addEventListener("OutFullScreen.before",function(){e.zoomChange()}),a.lang.eventCenter.addEventListener("OutFullScreen.after",function(){e.btnStatus()}),a.lang.eventCenter.addEventListener("Reader.initZoom",function(){e.zoomChange()}),a.event.on(window,"resize",function(){e.pageFlow()})},pageFlow:function(){var e=this;win=n(window),e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){if(!r.isFullScreen){var o=win.width(),t=a.url.getQueryValue(location.href,"width");e.baseWidth=c?t:1160>o?980:1234>o?1053:1308>o?1126:1200,e.zoomChange()}},100)},zoomDecrease:function(e){a.event.preventDefault(e),a.dom.hasClass(this.zoomDecreaseEl,"zoom-decrease-disable")||(r.currentZoomLevel=(10*r.currentZoomLevel-10*s.zoomStep)/10,this.zoomChange())},zoomAdd:function(e){a.event.preventDefault(e),a.dom.hasClass(this.zoomAddEl,"zoom-add-disable")||(r.currentZoomLevel=(10*r.currentZoomLevel+10*s.zoomStep)/10,this.zoomChange())},zoomChange:function(e){var o,t=this,n=e||r.currentZoomLevel;a.lang.eventCenter.dispatchEvent("Reader.zoomChangeBefore"),n>=1&&(o=t.baseWidth*n-t.asideWidth-2,a.dom.setStyle(t.addChangeEl,"width",t.baseWidth*n+"px"),a.dom.setStyle(t.decreaseChangeEl,"width",o+"px"),t.bStyleChangeEl&&a.dom.setStyle(t.bStyleChangeEl,"width","")),1>n&&(o=t.baseWidth*n-t.asideWidth,a.dom.setStyle(t.decreaseChangeEl,"width",o+"px"),a.dom.setStyle(t.addChangeEl,"width",t.baseWidth+"px"),t.bStyleChangeEl&&a.dom.setStyle(t.bStyleChangeEl,"width",o+2+"px")),t.readerResize(o-10),t.btnStatus(),a.lang.eventCenter.dispatchEvent("Reader.zoomChange",{zoomLevel:r.currentZoomLevel,width:o})},readerResize:function(e){var o=this;o.reader.setZoom(e)}},{superClass:l});t.exports.zoom=h});
;define("wkview:widget/html_view/html_reader/js/fullScreen.js",function(e,t,n){var l=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,d=e("wkcommon:widget/ui/js_core/util/util.js"),r=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,i=e("wkview:widget/html_view/html_reader/js/config.js").config,s=e("wkview:widget/html_view/html_reader/js/setting.js").setting,a=d.uniqueId(),c=i.pageDefaultWidth,u=(e("wkcommon:widget/lib/fis/data/data.js"),o({Options:{position:"left",reader:{}},_init:function(){var e=this,t=['<a class="ic reader-fullScreen xllDownloadLayerHit_left" href="###" title="\u5168\u5c4f\u663e\u793a" data-toolsBar-log="fullscreen"  alog-action="htmltoolbar.fullscreen"></a>'].join("");e.el=d.createDom(t),e.placeholder=d.createDom('<div class="reader-placeholder" id="reader-placeholder-'+a+'"></div>'),e.bindEvent(),e.isFullScreen=s.isFullScreen,l.lang.eventCenter.addEventListener("fullscreen.doWindow",l.fn.bind(e._doWindow,e)),l.lang.eventCenter.addEventListener("fullscreen.doFullScreen",l.fn.bind(e._doFullScreen,e)),e.isFullScreen&&e.doFullScreen()},bindEvent:function(){var e=this;l.event.on(e.el,"click",function(t){l.event.preventDefault(t),s.isFullScreen?e.doWindow():e.doFullScreen()}),l.event.on(document.body,"keyup",function(t){var n=l.event.getKeyCode(t);s.isFullScreen&&27===n&&e.doWindow()}),l.lang.eventCenter.addEventListener("Reader.initFullScreen",l.fn.bind(e.doFullScreen,e)),d.windowResize(l.fn.bind(function(){s.isFullScreen?(l.lang.eventCenter.dispatchEvent("Reader.fullScreenResize"),e.resizePlaceholder(),e.fullScreenResize()):l.lang.eventCenter.dispatchEvent("Reader.WindowResize")},e))},resizePlaceholder:function(){{var e=this,t=e.placeholder,n=e.readerContainer.el.offsetHeight,o=t.parentNode?l.dom.getPosition(t.parentNode).top:0;l.dom.query(i.ftEl)[0].offsetHeight}t.parentNode&&l.dom.setStyle(e.placeholder,"height",n-o+"px")},doWindow:function(){l.lang.eventCenter.dispatchEvent("fullscreen.doWindow")},_doWindow:function(){var e=this,t=e.readerContainer.el,n=l.dom.query(i.aside)[0];s.isFullScreen&&(l.lang.eventCenter.dispatchEvent("OutFullScreen.before"),l.dom.setStyle(t,"width",c+"px"),l.dom.removeClass(t,"fullScreen-container"),l.dom.setStyle(e.placeholder.parentNode,"height","")),l.dom.removeClass(e.el,"isFullScreen"),l.dom.setAttr(e.el,"title","\u5168\u5c4f\u663e\u793a"),s.isFullScreen&&(l.dom.show(n),l.dom.setStyles("doc",{overflow:""}),l.dom.insertBefore(t,e.placeholder),l.dom.hide(e.placeholder),document.body.appendChild(e.placeholder),document.documentElement.style.overflowX="",l.lang.eventCenter.dispatchEvent("OutFullScreen.after")),s.isFullScreen=!1},doFullScreen:function(){l.lang.eventCenter.dispatchEvent("fullscreen.doFullScreen")},_doFullScreen:function(){{var e=this,t=e.readerContainer.el,n=l.dom.getPosition(t.parentNode).top,o=l.dom.query(i.aside)[0];l.dom.query(i.ftEl)[0].offsetHeight}if(s.isFullScreen||(c=t.offsetWidth,l.lang.eventCenter.dispatchEvent("InFullScreen.before"),l.dom.insertAfter(e.placeholder,t),e.fullScreenResize(),l.dom.addClass(t,"fullScreen-container")),l.dom.addClass(e.el,"isFullScreen"),l.dom.setAttr(e.el,"title","\u6062\u590d\u7a97\u53e3"),l.dom.hide(o),l.dom.setStyles("doc",{overflow:"hidden"}),!s.isFullScreen){document.body.appendChild(t),l.dom.show(e.placeholder),document.documentElement.style.overflowX="hidden",l.lang.eventCenter.dispatchEvent("InFullScreen.after");var d=t.offsetHeight;l.dom.setStyle(e.placeholder,"height",d-n+"px")}o=null,s.isFullScreen=!0},fullScreenResize:function(){var e=this,t=e.readerContainer.el,n=l.page.getViewWidth();t.style.width=980>n?"980px":n+"px"}},{superClass:r}));n.exports.fullScreen=u});
;define("wkview:widget/html_view/html_reader/js/page.js",function(e,t,n){{var a=e("wkcommon:widget/lib/tangram/base/base.js"),i=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,o=e("wkcommon:widget/ui/js_core/util/util.js"),r=(e("wkcommon:widget/ui/js_core/log/log.js"),e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem),s=e("wkview:widget/html_view/html_reader/js/setting.js").setting,u=e("wkview:widget/html_view/html_reader/js/config.js").config;o.uniqueId(),e("wkcommon:widget/lib/fis/data/data.js")}windowTop=0,inputHasFocus=!1,startedRefresh=!1,numberKeyCode=[48,49,50,51,52,53,54,55,56,57],controlKeyCode=[8,13,127],directionKeyCode=[38,39,40,37];var p=i({Options:{position:"centerLeft",Bof:!1,Eof:!1},_init:function(){var e=this,t=['<div class="reader-tools-page xllDownloadLayerHit_left">','<input type="text" class="page-input" data-toolsBar-log="jumppage"/>','<span class="page-count">/'+e.readerContainer.totalPageNum+"</span>","</div>"].join("");e.el=o.createDom(t),e.input=a.dom.q("page-input",e.el,"input")[0],e.bindEvent(),e.inputValue(),e.fire("onload")},createPagesTop:function(){var e=this,t=a.dom.getPosition,n=t(e.readerContainer.el).top,i=e.readerContainer.pageList,o=i.length,r=0,s=[];for(o;o>r;r++)s.push(t(i[r]).top-n);e.pagesTop=s},bindEvent:function(){var e=this;a.event.on(e.input,"mousedown",function(e){inputHasFocus||(inputHasFocus=!0,this.select(),a.event.preventDefault(e))}),a.event.on(e.input,"keydown",a.fn.bind(e.inputType,e)),a.event.on(e.input,"input",a.fn.bind(e.inputChange,e)),a.event.on(e.input,"focus",a.fn.bind(e.inputFocus,e)),a.event.on(e.input,"blur",a.fn.bind(e.inputBlur,e)),a.event.on(e.input,"paste",a.fn.bind(e.inputPaste,e)),a.event.on(document,"keydown",function(t){var n=a.event.getKeyCode(t);(40===n||39===n||34===n)&&(e.nextPage(),a.event.preventDefault(t)),(38===n||37===n||33===n)&&(e.prevPage(),a.event.preventDefault(t))}),a.lang.eventCenter.addEventListener("Reader.scroll",a.fn.bind(e.readerScroll,e))},readerScroll:function(e,t){var n=this;n.inputValue(t),n.btnStatus(t)},setInputValue:function(e){var t=this;t.input.value=e,s.currentPage=e},inputPaste:function(e){var t=e.clipboardData.getData("text"),n=this;n.vaildPageNum(t)||a.event.stop(e)},inputFocus:function(){inputHasFocus=!0},inputBlur:function(){inputHasFocus=!1},inputChange:function(){var e=this,t=e.input.value;e.vaildPageNum(t)||e.inputValue()},inputType:function(e){var t=a.event.getKeyCode(e),n=this,i=numberKeyCode.concat(controlKeyCode,directionKeyCode);if(-1===a.array.indexOf(i,t)&&a.event.stop(e),13===t)if(n.vaildPageNum(n.input.value)){var o=parseInt(n.input.value,10);isNaN(o)||1>o||o>u.pageCount?n.inputValue():n.setInputValue(o),n.gotoPage()}else n.inputValue();9===a.browser.ie&&setTimeout(function(){n.inputChange(e)},1)},vaildPageNum:function(e){if(!/^\d{0,5}$/.test(e))return!1;var t=parseInt(e,10);return t>u.pageCount?!1:0>t?!1:!0},inputValue:function(e){var t=this,e=e||s,n=e.currentPage;t.setInputValue(n)},gotoPage:function(){var e=this,t=e.input,n=t.value;return e.vaildPageNum(n)?(n=parseInt(n,10),void e.readerContainer.gotoPage(n)):(n>e.pageCount&&e.setInputValue(e.pageCount),void(0>n&&e.setInputValue(1)))},btnStatus:function(e){var t=this,n=e.isOverflow,a=s.currentPage;return t.Bof=n.Bof,t.Eof=n.Eof,n.Bof&&n.Eof?(t.prevDisabled(),void t.nextDisabled()):n.Bof&&1===a?(t.prevDisabled(),void t.nextRelease()):n.Eof&&a===u.pageCount?(t.nextDisabled(),void t.prevRelease()):(t.prevRelease(),void t.nextRelease())},prevDisabled:function(){var e=this;a.dom.addClass(e.prevBtn,"page-prev-disable"),a.dom.setAttr(e.prevBtn,"title","")},nextDisabled:function(){var e=this;a.dom.addClass(e.nextBtn,"page-next-disable"),a.dom.setAttr(e.nextBtn,"title","")},prevRelease:function(){var e=this;a.dom.removeClass(e.prevBtn,"page-prev-disable"),a.dom.setAttr(e.prevBtn,"title","\u4e0a\u4e00\u9875")},nextRelease:function(){var e=this;a.dom.removeClass(e.nextBtn,"page-next-disable"),a.dom.setAttr(e.nextBtn,"title","\u4e0b\u4e00\u9875")},prevPage:function(){{var e=this;s.currentPage}startedRefresh||(s.scrollBof&&1!==u.pageRange[0]?(e.readerContainer.gotoPage(u.pageRange[0]-1),startedRefresh=!0):e.readerContainer.prevScreen())},nextPage:function(){var e=this;currentPage=s.currentPage,startedRefresh||(s.scrollEof&&u.pageRange[1]!==u.pageCount?(e.readerContainer.gotoPage(u.pageRange[1]+1),startedRefresh=!0):e.readerContainer.nextScreen())}},{superClass:r});n.exports.page=p});
;define("wkview:widget/html_view/html_reader/js/favo.js",function(e,t,o){var a=e("wkcommon:widget/lib/tangram/base/base.js"),i=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=e("wkcommon:widget/ui/js_core/util/util.js"),s=e("wkcommon:widget/ui/js_core/log/log.js"),d=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,r=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkview:widget/ui/view/movetree/movetree.js").movetree),l=e("wkcommon:widget/lib/fis/data/data.js"),c=l.get("WkInfo"),v=e("wkview:widget/html_view/html_reader/js/toolsTip.js").toolsTipCreater(),f=e("wkcommon:widget/ui/js_core/login/login.js").login,_=(l.get("searchQueryRefer"),i({Options:{position:"left",reader:{}},_init:function(){var e=this,t=['<div class="reader-tools-btn-wrap" tabIndex="-1" hidefocus="true"><a class="ic reader-favo" href="###" data-toolsBar-log="collect" alog-action="htmltoolbar.favo"></a></div>'].join("");e.el=n.createDom(t),e.clickEl=a.dom.q("reader-favo",e.el,"a")[0],+c.DocInfo.isInRoom&&a.dom.addClass(e.clickEl,"reader-has-favoed"),e.tip=v,e.bindEvent(),e.fire("onload"),e.btnStatus(),e.moveTreeCreated=!1,a.dom.addClass(e.clickEl,"reader-favo-new")},btnStatus:function(){},bindEvent:function(){var e=this;a.on(e.clickEl,"click",function(t){a.event.preventDefault(t),s.xsend(1,100034),f.verlogin(function(){var t=a.cookie.get("last-store-folder")||"0";e.addTofav(20010,c.DocInfo.docId,t,a.fn.bind(e.addToFavCallBack,e))},null,null,{actionName:"addTofav",fromMod:""})}),a.lang.eventCenter.addEventListener("favTip.showTree",function(e){a.event.stop(e);var t=this,o=t.favTip,i=a.dom.g("store-move-btn"),n=a.dom.g("store-move-box");if(a.dom.hide(i),n.style.display="inline",!t.moveTreeCreated){r({id:c.DocInfo.fold_id,disposePop:"no"}),t.moveTreeCreated=!0;{a.dom.g("cancel-move",o,"a")}}})},asyncCallBack:function(){var e=this;f.verlogin(function(){e.tip.show({contentEl:e.favTip,parent:e.el,className:"tools-fav-tip"})},null,null,{actionName:"favo"})},addTofav:function(e,t,o,i){a.ajax.request(c.Urls.submitCollect,{data:["ct="+e,"doc_id="+t,"fold_id="+o].join("&"),method:"post",onsuccess:i||function(){}})},createFavTip:function(e){var t=this,o=l.get("WkInfo"),i="";if(t.favTip)return void t.updateFavTip(e);o.DocInfo.payPrice||(i='<p class="wk-app-tip" style="margin-top:10px;">\u7528\u6587\u5e93\u624b\u673a\u5ba2\u6237\u7aef\u968f\u65f6\u67e5\u770b\u8be5\u6587\u6863\u3002<a href="http://wenku.baidu.com/apps?fr=1002" target="_blank">\u6ca1\u6709\u5ba2\u6237\u7aef\uff1f</a></p>');var s=['<div class="reader-tips-fav">','<b class="fav_sucess ic"></b>','<strong id="store-tip-text" class="store-tip-text" style="padding-left:5px;">__TIP_TEXT__</strong>','<a href="/user/mydocs" class="store-folder" id="store-move-link" target="blank" title="__FOLD_NAME__" data-id="__FOLD_ID__">',"__SHORT_NAME__","</a>","<br/>",'<div id="store-move-box" style="display:none">',"</div>",'<a href="###" class="store-move-btn" id="store-move-btn" data-btn-event="favTip.showTree">\u4fee\u6539\u4fdd\u5b58\u4f4d\u7f6e</a>',i,"</div>"].join("");s=s.replace(/__TIP_TEXT__/g,e.tip_text).replace(/__FOLD_ID__/g,e.fold_id).replace(/__FOLD_NAME__/g,a.string.encodeHTML(e.fold_name)).replace(/__SHORT_NAME__/g,a.string.encodeHTML(e.short_name)),t.favTip=n.createDom(s),a.event.on(a.dom.q("store-move-btn",t.favTip,"a")[0],"click",function(e){a.event.preventDefault(e)})},updateFavTip:function(e){var t=this,o=t.favTip,i=a.dom.q,n=a.dom.setAttr,s=i("store-tip-text",o)[0],d=i("store-folder",o)[0],r=(a.dom.g("store-move-btn"),a.dom.g("store-move-box"));s.innrHTML=e.tip_text,n(d,"data-id",e.fold_id),n(d,"title",e.fold_name),d.innerHTML=e.short_name,a.dom.hide(r)},addToFavCallBack:function(e,t){var o=this,i=a.json.parse(t),n=i.fold_id||"0",s=i.fold_name||"\u4e2a\u4eba\u4e2d\u5fc3",d=s.length>5?s.slice(0,5)+"...":s,r="\u5df2\u6536\u85cf\u81f3 ";a.dom.addClass(o.clickEl,"reader-has-favoed"),c.DocInfo.fold_id=n,c.DocInfo.fold_name=s,l.set("WkInfo",c),15==+i.error_no&&(r="\u5df2\u6536\u85cf\u5728 "),o.btnStatus();var v={fold_id:n,fold_name:s,short_name:d,tip_text:r};o.createFavTip(v),o.asyncCallBack()}},{superClass:d}));o.exports.favo=_});
;define("wkview:widget/html_view/html_reader/js/appraise.js",function(a,e,t){var s=a("wkcommon:widget/lib/tangram/base/base.js"),o=a("wkcommon:widget/ui/js_core/widget/widget.js").widget,i=a("wkcommon:widget/ui/js_core/util/util.js"),l=a("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,n=a("wkcommon:widget/lib/fis/data/data.js"),d=n.get("WkInfo"),r=a("wkview:widget/userEvaluation/userEvaluation.js").userEvaluation,c=a("wkcommon:widget/ui/js_core/log/log.js"),v=o({Options:{position:"left",reader:{}},_init:function(){var a=this,e=[];d.DocInfo.isPaymentDoc&&!d.DocInfo.ispaied?(e=['<div class="mod doc-evaluate"','<div class="content" id="reader-evaluate-content-wrap" data-id="',d.DocInfo.docId,'">','<span class="evaluate-title">\u8bc4\u4ef7\u6587\u6863\uff1a</span>','<span id="total-star" class="star" alog-group="view.evaltotal">',"</span>",'<span class="value-tip" id="doc-evaluate-tips">&nbsp;\u8d2d\u4e70\u540e\u53ef\u8bc4\u4ef7</span>',"</div>","</div>"].join(""),a.el=i.createDom(e),a.fire("onload"),setTimeout(function(){new r("reader-evaluate-content-wrap").getData(),$(a.el).show(),a.bindEvent()},1e3)):(e=['<div class="mod doc-evaluate" id="doc-evaluate-mod">','<div class="content" id="reader-evaluate-content-wrap" data-id="',d.DocInfo.docId,'" data-value="-1" data-doc-value="0">','<span class="evaluate-title">\u8bc4\u4ef7\u6587\u6863\uff1a</span>','<span id="total-star" class="star" alog-group="view.evaltotal">','<b class="value-star total ic-star-t-off"></b>','<b class="value-star total ic-star-t-off"></b>','<b class="value-star total ic-star-t-off"></b>','<b class="value-star total ic-star-t-off"></b>','<b class="value-star total ic-star-t-off"></b>',"</span>",'<span class="value-tip" id="doc-evaluate-tips"></span>',"</div>",'<div class="value-pop">','<span class="bot"></span>','<span class="top"></span>',"<p></p>","</div>"].join(""),a.el=i.createDom(e),a.fire("onload"),setTimeout(function(){new r("reader-evaluate-content-wrap").init(),$(a.el).show(),a.bindEvent()},1e3))},bindEvent:function(){var a=this;s.lang.eventCenter.addEventListener("Share.show",function(){var a=$(".reader-tools-bar .doc-evaluate");a.length&&a.hide()}),s.lang.eventCenter.addEventListener("Share.hide",function(){var a=$(".reader-tools-bar .doc-evaluate");a.length&&a.show()}),$(a.el).delegate(".star","click.log",function(){c.xsend(1,100507),$(a.el).undelegate(".star","click.log")})}},{superClass:l});t.exports.appraise=v});
;define("wkview:widget/html_view/html_reader/js/download.js",function(e,o,i){var n=(e("wkcommon:widget/ui/js_core/dialogCashier/dialogCashier.js"),e("wkcommon:widget/lib/tangram/base/base.js")),t=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/util/util.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),s=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,l=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkview:widget/ui/view/down_doc/down_doc.js").downDocCreate,e("wkview:widget/ui/view/down_doc/down_org_vip.js")),c=e("wkview:widget/ui/view/down_doc/down_doc.js").downDoc,r=e("wkcommon:widget/ui/js_core/login/login.js").login,p=e("wkcommon:widget/lib/fis/data/data.js"),w=e("wkcommon:widget/ui/js_core/_dialog/_dialog.js").alert,g=t({Options:{position:"centerRight",reader:{}},_init:function(){var e=this,o=p.get("WkInfo").DocInfo,i=(o.price||0,o.docTicket||0),t=o.isPaymentDoc||0,s=o.isInRoomButDeletedByCreater||!1,l=t?'<span class="ic has-pay-ic"></span>\u5df2\u8d2d\u4e70':'<span class="ic download-price-ic"></span>'+i+"&nbsp;\u4e0b\u8f7d\u5238</span>",c=o.isdownloaded||0,w=t&&!c||s?" downloadDisabled":"",g=document.getElementById("edit-docPrice"),f=+o.isPaymentDoc||0,m=+o.ispaied||0,v=+o.hangyebaogao_customized||0;o.vip_free_buy&&(l=['<span class="vip-free-buy">','<span class="original-price">\uffe5'+(o.payPrice/100).toFixed(2)+"</span><br/>",'<span class="vip-free">VIP\u514d\u8d39\u9605\u8bfb</span>',"</span>"].join(""),o.is_only_vip_doc&&(l=['<span class="vip-free-buy only_vip_doc">','<span class="vip-free">VIP\u514d\u8d39\u9605\u8bfb</span>',"</span>"].join("")));var h;h=1==p.get("WkInfo").DocInfo.freeDoc?['<div class="reader-tools-btn-wrap" style="position:relative;"><a class="ic reader-download" href="###" data-toolsBar-log="download" alog-action="htmltoolbar.download"><span style="display: block;position: absolute;top: -5px;right: 0px;width: 66px;font-size: 13px;height: 37px;line-height: 37px;padding-left: 18px;background: url(http://img.baidu.com/img/iknow/wenku/free-doc_02.gif) no-repeat 0 -2px;" class=""><span style="text-decoration: line-through;color:#999">'+p.get("WkInfo").DocInfo.freeMoney+'.00&nbsp;</span><span style="color:#e87301;">\u514d\u8d39</span></span></a></div>'].join(""):'<div class="reader-tools-btn-wrap-new download-btn"><span class="reader-download-price">'+l+'<a class="reader-download ui-bz-btn-senior'+w+'" href="###" data-toolsBar-log="download" alog-action="htmltoolbar.download"><b class="ui-btn-p-16 ui-btn-btc"><i class="iconfont">&#xe62d;</i>\u4e0b\u8f7d</b></a><a href="javascript:;" target="_blank" id="tip-notice-new" class="vip-free-auto">\u52a0\u5165VIP,\u514d\u5238\u4e0b\u8f7d\u672c\u6587</a></div>',e.el=a.createDom(h);{var _=p.get("WkInfo").PageInfo.isLogin,u=p.get("WkInfo").DocInfo.docId,b=$(e.el).find("#tip-notice-new");p.get("WkInfo")}if(_){var k="/cashier/browse/dispatch?doc_id="+u;("\u52a0\u5165VIP,\u514d\u5238\u4e0b\u8f7d\u672c\u6587"===b.html()||"\u52a0\u5165VIP,\u83b7\u53d6\u66f4\u591a\u7279\u6743"===b.html())&&b.attr("href",k+"&dqStatCode=31_8_171_172"),'<div><p><span class="iconfont">&#xe64e;</span>VIP\u4e13\u4eab</p>0\u4e0b\u8f7d\u5238 \u4e0b\u8f7d</div>'===b.html()&&b.attr("href",k+"&dqStatCode=31_8_171_174"),b.on("click",function(){d.xsend(1,100526),"\u52a0\u5165VIP,\u514d\u5238\u4e0b\u8f7d\u672c\u6587"===b.html()||"\u52a0\u5165VIP,\u83b7\u53d6\u66f4\u591a\u7279\u6743"===b.html()?d.xsend(1,100459):'<div><p><span class="iconfont">&#xe64e;</span>VIP\u4e13\u4eab</p>0\u4e0b\u8f7d\u5238 \u4e0b\u8f7d</div>'===b.html()&&d.xsend(1,100461)})}else b.on("click",function(){"\u52a0\u5165VIP,\u514d\u5238\u4e0b\u8f7d\u672c\u6587"===b.html()||"\u52a0\u5165VIP,\u83b7\u53d6\u66f4\u591a\u7279\u6743"===b.html()?(d.xsend(1,100459),r.verlogin(function(){d.xsend(1,100526),window.location.href="/cashier/browse/dispatch?doc_id="+u+"&dqStatCode=31_8_171_172"})):'<div><p><span class="iconfont">&#xe64e;</span>VIP\u4e13\u4eab</p>0\u4e0b\u8f7d\u5238 \u4e0b\u8f7d</div>'===b.html()&&(d.xsend(1,100461),r.verlogin(function(){d.xsend(1,100526),window.location.href="/cashier/browse/dispatch?doc_id="+u+"&dqStatCode=31_8_171_174"}))});if(m&&v&&f){var b=$("#tip-notice-new");b.css({visibility:"hidden",display:"none"})}g&&(t||e.el.appendChild(g),n.string.trim(g.innerHTML)&&(g.style.display="")),e.clickEl=n.dom.q("reader-download",e.el,"a")[0],e.bindEvent()},bindEvent:function(){var e=this,o=p.get("WkInfo").DocInfo,i=o.isInRoomButDeletedByCreater?"\u6743\u9650\u95ee\u9898":"\u7248\u6743\u65b9\u8981\u6c42";n.event.on(e.clickEl,"click",function(o){if(n.event.preventDefault(o),d.xsend(1,100035),n.dom.hasClass(e.clickEl,"downloadDisabled"))w({title:"\u63d0\u793a",content:'<p style="font-size:14px;margin:20px;text-align:center;">\u8be5\u6587\u6863\u56e0'+i+"\uff0c\u4ec5\u652f\u6301\u5728\u7ebf\u9605\u8bfb\u54e6\u3002</p>",width:350,height:180});else{var t=p.get("WkInfo");$.ajax({url:"/orgvip/interface/caniuse",cache:!1,async:!1,type:"get",data:{doc_id:t.DocInfo.docId,dowmloadTime:(new Date).getTime()}}).done(function(e){e&&void 0!==e.status.code&&11===+e.data.vip_type?l.init({WkInfo:t,docSize:(t.DocInfo.size/1024+"").replace(/^(\d+\.\d)\d+$/,"$1"),downDoc:c,caniuse:e}):r.verlogin(function(){n.lang.eventCenter.dispatchEvent("download.doc")},null,null,{actionName:"download",fromMod:"download"},!1)}).fail(function(){r.verlogin(function(){n.lang.eventCenter.dispatchEvent("download.doc")},null,null,{actionName:"download",fromMod:"download"},!1)})}})}},{superClass:s});i.exports.download=g});
;define("wkview:widget/html_view/html_reader/js/pay.js",function(e,i,t){var o=(e("wkcommon:widget/ui/js_core/dialogCashier/dialogCashier.js"),e("wkcommon:widget/lib/tangram/base/base.js")),s=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=e("wkcommon:widget/ui/js_core/util/util.js"),a=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,c=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkcommon:widget/ui/js_core/login/login.js").login),r=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),p=e("wkcommon:widget/ui/lib/jquery/jquery.js"),l=e("wkcommon:widget/ui/lib/cookie/cookie.js"),u=s({Options:{position:"centerRight",reader:{}},_init:function(){var e=this,i=r.get("WkInfo").DocInfo,t=((i.payPrice||0)/100).toFixed(2),s=((i.vip_price||0)/100).toFixed(2),a=(i.vip_type,i.goodsPayStatus),d=((i.confirm_price||t)/100).toFixed(2),u="PCActivity"==a.split("_")[0],v=i.is_only_vip_doc,g=1==i.org_discount_status,_='<span class="original-price">\uffe5'+t+"&nbsp;</span>",b=Math.round(i.org_discount_price/i.payPrice*10),w=(r.get("WkInfo").DocInfo.docId,r.get("WkInfo").DocInfo.is_discount_doc);if(g){var h=(i.org_discount_price/100).toFixed(2);_+='<br/><span class="vip-free">'+b+"\u6298\u4ef7:\uffe5"+h+"</span>"}else u?(_='<span class="real-price">\uffe5'+t+'&nbsp;</span><span class="vip-free activity-price">\u4fc3\u9500\u4ef7:\uffe5'+d+"</span>",setTimeout(function(){p(".ugctest .centerRight").css("right","-50px"),(i.vip_type>0||i.edu_vip_type>0)&&p(".toolsbar-vip-wrap").css("right","-30px")},2e3)):(_=(i.vip_type>0||i.edu_vip_type>0)&&i.is_discount_doc?'<span class="real-price">\uffe5'+t+'&nbsp;</span><span class="vip-free activity-price">VIP\u4f18\u60e0\u4ef7:\uffe5'+(i.vip_price/100).toFixed(2)+"</span>":'<span class="price price-new">\uffe5'+t+"\u5143</span>",i.is_only_vip_doc&&(_='<span class="vip-free">\u6587\u5e93VIP\u514d\u8d39\u9605\u8bfb</span>'));var f="";if(0!==+i.wk2yd)return f='<div class="reader-tools-btn-wrap-new"><a href="http://yuedu.baidu.com/ebook/'+i.wk2yd+'?fr=wenku" class="ui-bz-btn reader-pay'+(v?" reader-pay-disable":"")+'" alog-action="reader.buy.doc"><b class="ui-btn-p-10 ui-btn-btc">\u8d2d\u4e70</b></a><span class="vip-free-buy'+(v?" only_vip_doc":"")+'">'+_+"</span></div>",void(e.el=n.createDom(f));if(f='<div class="reader-tools-btn-wrap-new"><span style="vertical-align: -1px" class="vip-free-buy'+(v?" only_vip_doc":"")+'">'+_+'</span><a href="###" class="ui-bz-btn-senior reader-pay'+(v?" reader-pay-disable":"")+'" alog-action="reader.buy.doc"><b class="ui-btn-p-16 ui-btn-btc">\u8d2d\u4e70</b></a>&nbsp;&nbsp;<a class="ui-bz-btn pack-pay org-pay-hide" data-toolsbar-log="paybutton"href="###" alog-action="htmltoolbar.buy"><b class="ui-btn-p-16 ui-btn-btc">\u52a0\u5165VIP,\u672c\u6587\u514d\u8d39\u8d60\u9001</b></a><a class="ui-bz-btn add-vip-discount" style="display:none" href="javascript:;"><b class="ui-btn-p-16">\u52a0\u5165VIP,8\u6298\u8d2d\u4e70\u672c\u6587</b></a><a class="ui-bz-btn add-vip-chance" style="display:none" href="javascript:;"><b class="ui-btn-p-16">\u52a0\u5165VIP,\u83b7\u53d6\u66f4\u591a\u7279\u6743</b></a><span class="eight-discount">VIP\u4ef7\u683c\uff1a\uffe5'+s+"</span></div>",e.el=n.createDom(f),0===+i.org_discount_status){var y='<div id="org-discount-tip"><span class="close-icon"></span><span class="arrow-icon"></span><span class="tip-text">\u4eca\u5929\u8d2d\u4e70'+i.org_title+"\u6587\u6863\uff0c\u7b2c2\u7bc7\u8d77\u4eab"+b+"\u6298\u4f18\u60e0</span></div>";p(e.el).append(y)}else if(1===+i.org_discount_status){var m='<div id="org-discount-tip" class="now-discount"><span class="close-icon"></span><span class="arrow-icon"></span><span class="tip-text">\u672c\u6b21\u8d2d\u4e70\uff0c\u4eab\u53d7'+b+"\u6298\u54e6\uff01</span></div>";p(e.el).append(m)}l.get("org_discount_pop_close")||p(e.el).find("#org-discount-tip").show(),e.clickEl=o.dom.q("reader-pay",e.el,"a")[0],e.pack_clickEl=o.dom.q("pack-pay",e.el,"a")[0],e.bindEvent();+r.get("isDialogCashier");p(e.el).on("click",".add-vip-discount",function(){c.verlogin(function(){window.location.href="/cashier/browse/dispatch?dqStatCode=31_8_9_73"})}),p(e.el).on("click",".add-buy-report",function(){var e=r.get("WkInfo").DocInfo.docId,i=+r.get("WkInfo").PageInfo.isLogin;i?window.location.href="/org/browse/report?fr=btn&cashier_code=buy_report_doc&id="+e:c.verlogin(function(){})}),p(e.el).on("click",".add-vip-chance",function(){p(this).hasClass("add-buy-report")||c.verlogin(function(){window.location.href="/cashier/browse/dispatch?dqStatCode=31_8_9_73"})}),setTimeout(function(){if(1==i.hangyebaogao_customized){var e=((+i.confirm_price||0)/100).toFixed(2),n='<span style="color: #888; margin-right: 20px;">\uffe5'+e+"</span>";p(".add-vip-chance").addClass("add-buy-report").find("b").html("\u5b9a\u5236\u6b64\u7bc7\u62a5\u544a"),p(".add-vip-chance").show(),p(".reader-pay").hide(),p(".vip-free-buy").html(n)}else t&&5>=t&&(!i.vip_type||0==i.vip_type)&&0==i.edu_vip_type&&(o.lang.eventCenter.dispatchEvent("pack.button.hide"),p(".reader-tools-zoom").css("right","400px"),p(".reader-tools-bar").find(".reader-fullScreen").css("right","355px")),i.vip_type&&0!==i.vip_type||0!==i.edu_vip_type||(t&&t>5&&s!==t&&1===w&&(p(".add-vip-discount").show(),p(".eight-discount").show()),t&&t>5&&s===t&&p(".add-vip-chance").show(),u&&t&&t>5&&p(".add-vip-chance").show())},300)},bindEvent:function(){var e=this,i=r.get("WkInfo").DocInfo;o.event.on(e.clickEl,"click",function(e){e=e||window.event,o.event.preventDefault(e);var i=o.event.getTarget(e);o.lang.eventCenter.addEventListener("Login.Success",function(e){o.event.stop(e),o.lang.eventCenter.dispatchEvent("ReaderToolsBar.BuyDoc",{target:i})});var t=r.get("WkInfo").PageInfo.isLogin;t||d.xsend(1,100351),c.verlogin(function(){d.xsend(1,100351),o.lang.eventCenter.dispatchEvent("ReaderToolsBar.BuyDoc",{target:i})},null,null,null,!1)}),o.event.on(e.pack_clickEl,"click",function(e){e=e||window.event,o.event.preventDefault(e);var t=(o.event.getTarget(e),'http://wenku.baidu.com/cashier/browse/vipwithdoccashier?doc_ids=["'+i.docId+'"]&dqStatCode=31_35_37');window.location.href=t}),p("body").on("click","#org-discount-tip .close-icon",function(){p("#org-discount-tip").hide();var e=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(59),l.set("org_discount_pop_close","1",{expires:e})})}},{superClass:a});t.exports.pay=u});
;define("wkview:widget/html_view/html_reader/js/searchBox.js",function(e,t,o){var s=e("wkcommon:widget/lib/tangram/base/base.js"),r=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,i=e("wkcommon:widget/ui/js_core/util/util.js"),n=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,a=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkcommon:widget/lib/fis/data/data.js")),l=e("wkcommon:widget/ui/js_core/log/log.js"),c=r({Options:{position:"right",zoomLevel:1,el:null},_init:function(){if(a.get("searchQueryRefer")){l.send("view","bottomSearchShow",{page:"view",queryRefer:a.get("searchQueryRefer")});var e=this,t=['<div class="toolsbar-search-wrap">','<div class="toolbar-fsm-wrap toolsbar-search-tip-wrap">','<a class="toolbar-fsm-btn" title="',a.get("searchQueryRefer"),'" href="/search?word=',a.get("searchQueryRefer"),'&fr=top_home">\u60a8\u6b63\u5728\u641c\u7d22\u201c',a.get("searchQueryRefer").length>4?a.get("searchQueryRefer").substr(0,3)+"...":a.get("searchQueryRefer"),"\u201d\u70b9\u51fb\u67e5\u770b\u66f4\u591a\u6587\u6863</a>",'<a class="fsm-close-btn" href="javascript:void(0);" title="\u5173\u95ed"></a>',"</div>",'<div class="reader-tools-search">','<form action="/search" method="get">','<div class="reader-tools-search-box">','<b class="ic ic-search"></b>','<input type="input" name="word" class="reader-tools-search-input" value="',a.get("searchQueryRefer"),'"/>',"</div>",'<input type="submit" class="reader-tools-search-btn"/>','<input type="hidden" name="od" value="0">','<input type="hidden" name="fr" value="top_home">',"</form>","</div>","</div>"].join("");e.el=i.createDom(t),e.boxEl=s.dom.q("reader-tools-search-box",e.el,"div")[0],e.inputEl=s.dom.q("reader-tools-search-input",e.el,"input")[0],e.btnEl=s.dom.q("reader-tools-search-btn",e.el,"input")[0],e.fsm=s.dom.q("toolbar-fsm-wrap",e.el,"div")[0],e.fsmCloseBtn=s.dom.q("fsm-close-btn",e.el,"a")[0],e.bindEvent()}},inputFocus:function(){var e=this;s.dom.addClass(e.boxEl,"focus")},inputBlur:function(){var e=this;s.dom.removeClass(e.boxEl,"focus")},btnOver:function(){var e=this;s.dom.addClass(e.btnEl,"hover")},btnOut:function(){var e=this;s.dom.removeClass(e.btnEl,"hover")},bindEvent:function(){var e=this;s.event.on(e.inputEl,"focus",s.fn.bind(e.inputFocus,e)),s.event.on(e.inputEl,"blur",s.fn.bind(e.inputBlur,e)),s.event.on(e.btnEl,"mouseover",s.fn.bind(e.btnOver,e)),s.event.on(e.btnEl,"mouseout",s.fn.bind(e.btnOut,e)),s.event.on(e.btnEl,"click",function(){l.send("view","bottomSearchClick",{page:"view",queryRefer:a.get("searchQueryRefer"),query:this.value})}),s.event.on(e.fsmCloseBtn,"click",function(){e.fsm.style.display="none"})}},{superClass:n});o.exports.searchBox=c});
;define("wkview:widget/html_view/html_reader/js/addToAlbum.js",function(e,t,i){var o=e("wkcommon:widget/lib/tangram/base/base.js"),l=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=e("wkcommon:widget/ui/js_core/util/util.js"),n=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,d=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkview:widget/html_view/html_reader/js/toolsTip.js").toolsTipCreater()),s=e("wkcommon:widget/ui/js_core/log/log.js"),r=e("wkcommon:widget/ui/js_core/login/login.js").login,c=e("wkview:widget/ui/UIaddToAlbum/UIaddToAlbum.js").UIaddAlbum,m=(o.dom.create("div"),l({Options:{position:"left",reader:{}},_init:function(){var e=this,t=['<div class="reader-tools-btn-wrap" tabIndex="-1" hidefocus="true"><a class="reader-addToAlbum ic reader-ic-addToAlbum" title="\u52a0\u5165\u6587\u8f91" href="###" data-toolsBar-log="add2album" alog-action="htmltoolbar.add2album"></a></div>'].join("");e.el=a.createDom(t),e.clickEl=o.dom.q("reader-addToAlbum",e.el,"a")[0],e.tip=d,e.bindEvent(),e.fire("onload"),e.e={show:function(){var t=[].slice.call(arguments,0);e.asyncCallBack.apply(e,t)}}},asyncCallBack:function(e){var t=this;t.tip.show({contentEl:a.createDom(e.content),parent:t.el,className:"tools-addAlbum-tip"})},bindEvent:function(){var e=this;o.event.on(e.clickEl,"click",function(t){o.event.preventDefault(t),s.send("view","album",{from:"view",readerVersion:3}),r.verlogin(function(){c(e.e)},null,null,{actionName:"addToAlbum"})}),o.lang.eventCenter.addEventListener("toolsTip.gc",function(e,t){if("tools-addAlbum-tip"===t.className&&(o.dom.remove(t.el),o.browser.ie&&o.browser.ie<8)){var i=o.dom.create("div");i.appendChild(t.el),i.innerHTML="",i=null}})},asyncCallback:function(){}},{superClass:n}));i.exports.addToAlbum=m});
;define("wkview:widget/html_view/html_reader/js/share.js",function(e,i,t){var n=e("wkcommon:widget/lib/tangram/base/base.js"),o=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,s=e("wkcommon:widget/ui/js_core/util/util.js"),r=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,d=e("wkview:widget/html_view/html_reader/js/toolsTip.js").toolsTipCreater(),a=e("wkview:widget/html_view/html_reader/js/config.js").config,c=(e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkcommon:widget/ui/lib/jquery/jquery.js")),l=e("wkcommon:widget/ui/js_core/qrcode/qrcode.js"),h=e("wkcommon:widget/ui/js_core/log/log.js"),p=e("wkcommon:widget/lib/fis/data/data.js"),m="http://wenku.baidu.com",w="/view/",g=m+w+p.get("WkInfo").DocInfo.docId+".html",v=e("wkcommon:widget/ui/js_core/toolkit/toolkit.js"),f=o({Options:{position:"left",reader:{}},_init:function(){var e=this,i=null,t={};i=['<div class="reder-share-model bdshare_t bds_tools_32 get-codes-bdshare" id=""><a href="javascript:;" class="ico-share"></a><div class="shareTitle">\u5206\u4eab\u5230\uff1a</div>','<a href="#" title="\u5206\u4eab\u5230QQ\u7a7a\u95f4" class="share_lv1_btn qqzone logSend" data-logsend=\'{"send":["view","share",{"sns":"mqqzone","from":"html_view_toolbar"}]}\'>QQ\u7a7a\u95f4</a>','<a href="#" title="\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a" class="share_lv1_btn sinaweibo bds_tsina logSend" data-logsend=\'{"send":["view","share",{"sns":"msina","from":"html_view_toolbar"}]}\'>\u65b0\u6d6a\u5fae\u535a</a>','<a href="#" title="\u5206\u4eab\u5230\u4eba\u4eba\u7f51" class="share_lv1_btn renren bds_renren logSend" id="renren">\u4eba\u4eba\u7f51</a>','<a href="#" title="\u5206\u4eab\u5230\u5fae\u4fe1" class="share_lv1_btn share_lv1_btn_weixin weixin logSend" id="share_lv1_btn_weixin" data-logsend=\'{"send":["view","share",{"sns":"mweixin","from":"html_view_toolbar"}]}\'>\u5fae\u4fe1</a>','<div class="weixinTips" id="weixinTips"><div class="qrcode reader-weixin-share-qrcode" id="weixinQrcode"></div><p>\u626b\u4e8c\u7ef4\u7801\uff0c\u5feb\u901f\u5206\u4eab\u5230\u5fae\u4fe1\u670b\u53cb\u5708</p></div>','<a class="share_lv1_btn more-share reader-shareDoc ic reader-ic-shareDoc" title="\u5206\u4eab" href="###" data-toolsBar-log="share" alog-action="htmltoolbar.share"></a></div>'].join(""),e.el=s.createDom(i),e.$el=c(e.el),e.clickEl=n.dom.q("reader-shareDoc",e.el,"a")[0],e.qrcodeBtn=n.dom.q("share_lv1_btn_weixin",e.el,"a")[0],e.qrcode=n.dom.q("reader-weixin-share-qrcode",e.el,"div")[0],e.qrcodeTip=n.dom.q("weixinTips",e.el,"div")[0],e.qqZoneBtn=n.dom.q("qqzone",e.el,"a")[0],e.sinaweiboBtn=n.dom.q("sinaweibo",e.el,"a")[0],e.renrenBtn=n.dom.q("renren",e.el,"a")[0],e.qrcodeInited=!1,e.tip=d,e.docMsg=t,e.fire("onload"),e.bindEvent(),e.setShareConfig()},initQrcode:function(){if(!this.qrcodeInited){var e="?qrcode=1",i=g+e,t={text:i,width:88,height:88};n.browser.ie&&n.browser.ie<9&&(t.width=106,t.height=106,this.qrcode&&(this.qrcode.style.width="106px",this.qrcode.style.height="106px",this.qrcode.style.marginTop="10px")),this.qrcode&&new l(this.qrcode,t),this.qrcodeInited=!0}},bindEvent:function(){var e=this,i=!1,t=!1;n.event.on(e.clickEl,"click",function(i){if(n.event.preventDefault(i),h.xsend(1,100032),t){t=!1;try{e.tip.hide(),c("#share-tips").css("z-index",10)}catch(i){}}else t=!0,e.showTip(),e.hideWeixinTip(),c("#share-tips").css("z-index",2)}),n.event.on(e.qqZoneBtn,"click",function(i){n.event.preventDefault(i),h.xsend(1,100032),h.xsend(1,100498,{index:1}),window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent("\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011(\u5206\u4eab\u81ea@\u767e\u5ea6\u6587\u5e93)"+e.docMsg.meta+"\u9605\u8bfb\u5168\u6587\u8bf7\u6233\u53f3\u8fb9"))}),n.event.on(e.sinaweiboBtn,"click",function(i){n.event.preventDefault(i),h.xsend(1,100032),h.xsend(1,100498,{index:2}),window.open("http://service.weibo.com/share/share.php?appkey=2273341579&url="+encodeURIComponent(location.href)+"&title="+encodeURIComponent("\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011(\u5206\u4eab\u81ea@\u767e\u5ea6\u6587\u5e93)"+e.docMsg.meta+"\u9605\u8bfb\u5168\u6587\u8bf7\u6233\u53f3\u8fb9")+"&pic="+encodeURIComponent(e.docMsg.pic))}),n.event.on(e.renrenBtn,"click",function(i){n.event.preventDefault(i),h.xsend(1,100498,{index:3}),window.open("http://widget.renren.com/dialog/share?resourceUrl="+encodeURIComponent(location.href)+"&title="+encodeURIComponent("\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011")+"&description="+encodeURIComponent("(\u5206\u4eab\u81ea@\u767e\u5ea6\u6587\u5e93)"+e.docMsg.meta+"\u9605\u8bfb\u5168\u6587\u8bf7\u6233\u53f3\u8fb9")+"&pic="+encodeURIComponent(e.docMsg.pic))}),n.lang.eventCenter.addEventListener("show-share-panel",function(){e.showTip(),e.hideWeixinTip()}),n.event.on(e.qrcodeBtn,"click",function(t){n.event.preventDefault(t),h.xsend(1,100032),h.xsend(1,100498,{index:4});try{e.tip.hide()}catch(t){}i?(i=!1,e.hideWeixinTip(),c("#share-tips").css("z-index",10)):(i=!0,e.showWeixinTip(),c("#share-tips").css("z-index",2))}),e.$el.find(".ico-share").on("click",function(){h.xsend(1,100498,{index:0}),e.$el.hasClass("reder-share-model-newstyle-cur")?(e.$el.animate({width:40},"fast",function(){n.lang.eventCenter.dispatchEvent("Share.hide"),e.$el.removeClass("reder-share-model-newstyle-cur")}),i&&(i=!1,e.hideWeixinTip(),c("#share-tips").css("z-index",10))):(n.lang.eventCenter.dispatchEvent("Share.show"),e.$el.animate({width:252},"fast",function(){e.$el.addClass("reder-share-model-newstyle-cur")})),c.ajax({type:"get",url:"/doc/interface/getsharedocinfo?doc_id="+p.get("WkInfo").DocInfo.docId,success:function(i){0===i.errno&&(e.docMsg.pic="http://retype.wenku.bdimg.com/img/"+i.picid,e.docMsg.meta=v.getSubstr(i.meta,110))}})}),c("body").on("click",".reader_tips_close",function(){c("#share-tips").css("z-index",10)})},loadData:function(){var e=this;c.ajax({type:"get",url:"/doc/interface/getsharedocinfo?doc_id="+p.get("WkInfo").DocInfo.docId,success:function(i){0===i.errno&&(e.docMsg.pic="http://retype.wenku.bdimg.com/img/"+i.picid,e.docMsg.meta=v.getSubstr(i.meta,110))}})},showWeixinTip:function(){this.qrcodeTip.style.display="block",this.initQrcode()},hideWeixinTip:function(){this.qrcodeTip.style.display="none"},showTip:function(){this.tip.show({contentEl:n.dom.g(a.shareElId),parent:this.el,className:"tools-share-tip"})},setShareConfig:function(){var e=n.dom,i=e.q("bdshare_t")[0];e.setAttr(i,"data",n.json.stringify({pic:"http://img.baidu.com/img/iknow/wenku/erweima2001.jpg",text:"\u6211\u6b63\u5728@\u767e\u5ea6\u6587\u5e93 \u9605\u8bfb\u3010"+document.title.replace(/_\u767e\u5ea6\u6587\u5e93/,"")+"\u3011\u8fd9\u7bc7\u6587\u7ae0\uff0c\u63a8\u8350\u7ed9\u5927\u5bb6\uff01\u7528\u6587\u5e93\u5ba2\u6237\u7aef\u53ef\u4ee5\u514d\u8d22\u5bcc\u503c\u4e0b\u8f7d\u8be5\u6587\u6863\uff0c\u5ba2\u6237\u7aef\u4e0b\u8f7d\u5730\u5740\uff1ahttp://"+location.host+"/apps?fr=2001 \u60f3\u7acb\u5373\u9605\u8bfb\u8be5\u6587\u6863\u70b9\u8fd9\u91cc\uff1a",url:location.href}))}},{superClass:r});t.exports.share=f});
;define("wkview:widget/html_view/html_reader/js/backToTop.js",function(e,t,a){var o=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,i=e("wkcommon:widget/ui/js_core/util/util.js"),s=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,r=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=e("wkcommon:widget/ui/js_core/mvp/template/template.js").template,l=e("wkcommon:widget/ui/js_core/log/log.js"),d=e("wkcommon:widget/ui/js_core/xform/xform.js"),m=n({Options:{position:"right"},_init:function(){var e=this,t='<div class="reader-back2top-wrap" id="activity-tg">\n    <a class="reader-getcoupons active" href="http://wenku.baidu.com/task/browse/daily" target="_blank" title="\u9886\u53d6\u4e0b\u8f7d\u5238" hidefocus="true" data-toolsBar-log="getcoupons" alog-action="htmltoolbar.getcoupons">\u9886\u53d6<br/>\u4e0b\u8f7d\u5238 <span class="num"></span>\n    </a>\n    <a class="reader-feedback" href="http://wenku.baidu.com/feedback" target="_blank" title="\u65b0\u7248\u53cd\u9988" tabindex="-1" hidefocus="true" data-toolsBar-log="feedback" alog-action="htmltoolbar.feedback">\u65b0\u7248\u53cd\u9988</a>\n    <a class="reader-backToTop" href="###" title="\u56de\u5230\u9876\u90e8" tabindex="-1" hidefocus="true" data-toolsBar-log="gotop" alog-action="htmltoolbar.back2top"><span class="bg-index s-ic top"></span></a>\n</div>\n';e.el=i.createDom(t),e.getcoupons=o.dom.q("reader-getcoupons",e.el)[0],e.back2top=o.dom.q("reader-backToTop",e.el)[0],e.feedback=o.dom.q("reader-feedback",e.el)[0],e.notifyNum=o.dom.q("num",e.el)[0],e.readerSummer=o.dom.q("reader-summer",e.el)[0],e.readerSummerNum=o.dom.q("reader-summer-num",e.el)[0],e.summerEvent(),e.bindEvent(),e.toggleEl(),e.showNotify()},summerEvent:function(){var e=this,t="#activity-tg";d.getJSON("viewActivity",{success:function(a){var o=a.activity_api;console.log("data.activity_api:",o);for(var n=0,i=o.length;i>n;n++){var s=new Date(o[n].startTime).getTime(),c=new Date(o[n].stopTime).getTime(),l=(new Date).getTime();if(l>s&&c>l){r(t).find("a").length>0?r(o[n].name).insertBefore(r(t).find("a").eq(0)):r(t).append(r(o[n].name)),r(t).find("a").eq(1).removeClass("active"),r(t).css("top","-280px"),e.setACookie(s);break}}}})},setACookie:function(e){var t=o.cookie.get("activityFlag")?o.cookie.get("activityFlag"):0;if(!(t>e)){var a=this;a.readerSummer=".reader-summer",a.readerSummerNum=".reader-summer-num",r(a.readerSummerNum).css("display","block"),r(a.readerSummer).on("click",function(){r(a.readerSummerNum).css("display","none");var e=(new Date).getTime();o.cookie.set("activityFlag",e,{expires:2592e6,path:"/"})})}},bindEvent:function(){var e=this;o.event.on(e.back2top,"click",function(t){o.event.preventDefault(t);var a=o.page.getScrollLeft();window.scrollTo(a,0),e.back2top.blur()}),o.lang.eventCenter.addEventListener("ToolsBar.resize",o.fn.bind(e.fixPosition,e)),o.lang.eventCenter.addEventListener("Reader.scroll",o.fn.bind(e.toggleEl,e)),r(e.getcoupons).on("mouseenter",function(){l.xsend(1,100504,{index:1})})},fixPosition:function(e,t){var a=this,n=t.isMax;n?(o.dom.setStyle(a.getcoupons,"right","-1px"),o.dom.setStyle(a.back2top,"right","-1px"),o.dom.setStyle(a.feedback,"right","-1px")):(o.dom.removeStyle(a.getcoupons,"right"),o.dom.removeStyle(a.back2top,"right"),o.dom.removeStyle(a.feedback,"right"))},toggleEl:function(){var e=this,t=o.page.getScrollTop();return t>100?void r(e.el).slideDown():void r(e.el).slideUp()},showNotify:function(){var e=this;r.get("/task/interface/taskstate").success(function(t){var a=0;if(0===+t.data.sign_state&&a++,0===+t.data.reward_state&&a++,0===+t.data.newshare_info_state&&a++,a>0){var o=c('<div class="my-task-wrapper">\n    <span class="right-arrow"></span>\n    <ul>\n        <% if(+newshare_info_state === 0){ %>\n        <a href="/task/browse/daily#shareTask" target="_blank">\n        <li class="to-share"><i class="iconfont">&#xe605;</i>\n            <h3>\u6bcf\u65e5\u5206\u4eab></h3>\n            <p>\u7ed9\u597d\u53cb\u5206\u4eab\u7cbe\u9009\u6587\u6863\u8d62\u53d6\u4e0b\u8f7d\u5238</p>\n        </li>\n        </a>\n        <% } %>\n\n        <% if(+sign_state === 0){ %>\n        <a href="/task/browse/daily#signin" target="_blank">\n        <li class="to-sign"><i class="iconfont">&#xe61c;</i>\n            <h3>\u6bcf\u65e5\u7b7e\u5230></h3>\n            <p>\u575a\u6301\u6bcf\u65e5\u7b7e\u5230\uff0c\u9001\u7ecf\u9a8c\u503c\u548c\u4e0b\u8f7d\u5238</p>\n        </li>\n        </a>\n        <% } %>\n\n        <% if(+reward_state === 0){ %>\n        <a href="/task/browse/daily#share" target="_blank">\n        <li class="to-reward"><i class="iconfont">&#xe60b;</i>\n            <h3>\u6bcf\u65e5\u60ac\u8d4f></h3>\n            <p>\u62a2\u505a\u60ac\u8d4f\u4efb\u52a1\uff0c\u62ff\u4e0b\u8f7d\u5238\u5956\u52b1</p>\n        </li>\n        </a>\n        <% } %>\n    </ul>\n</div>\n',t.data);r(e.getcoupons).append(o),r(e.getcoupons).find(".to-share").on("click",function(){l.xsend(1,100504,{index:2})}),r(e.getcoupons).find(".to-sign").on("click",function(){l.xsend(1,100504,{index:3})}),r(e.getcoupons).find(".to-reward").on("click",function(){l.xsend(1,100504,{index:4})})}})}},{superClass:s});a.exports.backToTop=m});
;define("wkview:widget/html_view/html_reader/js/freeSendMobile.js",function(i,e,o){var t=i("wkcommon:widget/lib/tangram/base/base.js"),s=i("wkcommon:widget/ui/js_core/widget/widget.js").widget,a=i("wkcommon:widget/ui/js_core/util/util.js"),n=i("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,d=i("wkcommon:widget/ui/js_core/login/login.js").login,r=i("wkcommon:widget/lib/fis/data/data.js"),c=(r.get("WkInfo"),i("wkcommon:widget/ui/lib/jquery/jquery.js")),l=(t.dom,t.event,s({Options:{position:"right"},_init:function(){var i=this,e=['<div class="toolbar-fsm-wrap toolsbar-vip-wrap">','<span class="toolbar-fsm-btn" id="vip-msg">','<span class="ic ic-joinvip mr5"></span>','<a href="javascript:;" target="_blank" id="tip-notice">','\u52a0\u5165\u6587\u5e93VIP\uff0c<span class="orange">\u83b7\u5f97\u514d\u4e0b\u8f7d\u5238\u7279\u6743</span>',"</a>","</span>",'<a class="fsm-close-btn" href="javascript:void(0);" title="\u5173\u95ed"></a>',"</div>"].join("");i.el=a.createDom(e);var o=c(i.el).find("#tip-notice"),t=r.get("WkInfo").PageInfo.isLogin,s=r.get("WkInfo").DocInfo.docId;c(i.el).find(".toolbar-fsm-btn").addClass("vip-msg-hide"),t?o.attr("href","/cashier/browse/dispatch?doc_id="+s+"&dqStatCode=31_8_9_11"):o.on("click",function(){d.verlogin(function(){window.location.href="/cashier/browse/dispatch?doc_id="+s+"&dqStatCode=31_8_9_11"})})}},{superClass:n}));o.exports.freeSendMobile=l});
;define("wkview:widget/html_view/html_reader/js/joinVip.js",function(i,t,e){var o=i("wkcommon:widget/lib/tangram/base/base.js"),s=i("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=i("wkcommon:widget/ui/js_core/util/util.js"),c=i("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,a=(i("wkcommon:widget/ui/js_core/login/login.js").login,i("wkview:widget/ui/view/down_doc/down_doc.js"),i("wkcommon:widget/lib/fis/data/data.js")),p=(a.get("WkInfo"),a.get("searchQueryRefer")),r=(o.dom,o.event,o.fn,o.lang.eventCenter,s({Options:{position:p?"centerRight":"right"},_init:function(){var i=this,t=a.get("WkInfo").DocInfo,e=(t.JOINVIP_URL||"/vip/privilege",t.goodsPayStatus),o=t.price_supported_devices_info;o=o.split("\u3001").length>2?"\u65e0\u7ebf":o;var s=a.get("WkInfo").DocInfo.docId,c={vip_free:'<span class="ic ic-joinvip"></span>\u6587\u5e93VIP<span class="orange">0\u5143</span>\u9605\u8bfb\u5168\u6587<a href="/cashier/browse/dispatch?doc_id='+s+'" target="_blank">\u7acb\u5373\u52a0\u5165&gt;&gt;</a>',vip_discount:'<span class="ic ic-joinvip"></span><a href="/cashier/browse/dispatch?doc_id='+s+'&dqStatCode=31_8_9_73" target="_blank">\u52a0\u5165\u6587\u5e93VIP\uff0c<span class="orange">\u7cbe\u9009\u4ed8\u8d39\u6587\u68638\u6298</span></a>',noVipDiscount:"",vipDiscountNew:'<span class="pay-doc-vip-link"><i class="iconfont xufei-vip-icon">&#xe64e;</i></span><a href="http://wenku.baidu.com/cashier/browse/dispatch?doc_id='+s+'&dqStatCode=31_8_9_73" target="_blank">\u7eed\u8d39VIP\uff0c\u7acb<span class="five-times">\u8d605\u6b21</span>\u4e0b\u8f7d\u7279\u6743\u8d77</a>',OtherActivity:o+'\u5ba2\u6237\u7aef <span class="orange">\u9650\u65f6\u4fc3\u9500</span>\uff0c<a href="/apps" target="_blank">\u7acb\u5373\u4e0b\u8f7d&gt;&gt;</a>'},p={OtherActivity_NoDiscount_Vip:c.OtherActivity,OtherActivity_Discount_Vip:c.OtherActivity,OtherActivity_Free_Vip:c.OtherActivity,OtherActivity_Only_Vip:c.OtherActivity,NoneActivity_Discount_NoVip:c.noVipDiscount,NoneActivity_Free_NoVip:c.vip_free,NoneActivity_Only_NoVip:c.vip_free,OtherActivity_NoDiscount_NoVip:c.OtherActivity,OtherActivity_Discount_NoVip:c.vip_discount,OtherActivity_Free_NoVip:c.vip_free,OtherActivity_Only_NoVip:c.vip_free,NoneActivity_NoDiscount_Vip:c.vipDiscountNew,NoneActivity_Discount_Vip:c.vipDiscountNew,PCActivity_NoDiscount_Vip:c.vipDiscountNew,PCActivity_Discount_Vip:c.vipDiscountNew};template=['<div class="toolbar-fsm-wrap toolsbar-vip-wrap">','<span class="toolbar-fsm-btn">'+p[e]+"</span>","</div>"].join(""),i.el=n.createDom(template)}},{superClass:c}));e.exports.joinVip=r});
;define("wkview:widget/html_view/html_reader/js/autofixed.js",function(t,e,i){var o=t("wkcommon:widget/lib/tangram/base/base.js"),s=t("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=(t("wkcommon:widget/ui/js_core/util/util.js"),t("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,t("wkview:widget/html_view/html_reader/js/config.js").config,t("wkcommon:widget/ui/lib/jquery/jquery.js")),l=(t("wkview:widget/html_view/html_reader/js/setting.js").setting,s({Options:{el:""},_init:function(t){this.el=t.el,this.exTop=t.exTop||0,this.el&&(this.oldStyle={},this.status=0,this.wrapBodyEl=o.q("body")[0],this.guid=o.lang.guid(),this.getStyle(),this.agentNode=this.createAgentNode(),this.bindEvent())},bindEvent:function(){var t=this,e=o.event.on,i=o.lang.eventCenter;e(window,"scroll",function(){if(t.exTop>0&&(t.exTop=n(window).height()-270),t.oldStyle.absolutePosition&&o.page.getScrollTop()>t.oldStyle.absolutePosition.top+-t.exTop){t.status||(t.floatDom(),t.reposition());var e=o.page.getScrollLeft();if(o.page.getViewWidth()<o.page.getWidth()&&o.lang.isNumber(e)&&e>-1&&(!o.browser.ie||o.browser.ie>6)&&!o.browser.firefox){var i=parseInt(n(".body").css("margin-left")),s=parseInt(n(".reader-page").css("width")),l=i+s+35;o.dom.setStyle(t.el,"left",l)}}else t.status&&t.putback()}),e(window,"resize",function(){t.reposition()}),i.addEventListener("Reader.zoomChange",function(){setTimeout(function(){t.reposition()},10)}),i.addEventListener("jigou.recomInit",function(){t.putback()}),i.addEventListener("OutFullScreen.after",function(){t.reposition()})},floatDom:function(){var t=o.browser.ie,e=this.el,i=this.agentNode.style,s=this.oldStyle,l=e.parentNode,d=o.dom.getPosition(l).top+65+this.exTop,r=35+this.exTop;void 0!==n(e).attr("data-fixed-top")&&(r=n(e).attr("data-fixed-top")),n(e).find(".jingpin-zq-reco").length&&(r+=9),t&&7>t?(l.style.overflow="visible",document.documentElement.style.cssText+=";background : url(about:blank) fixed;",e.style.cssText+=";position : absolute;left:0!important; top : expression(documentElement.scrollTop - "+d+");width : "+s.width+"px"):e.style.cssText+=";position : fixed; top : "+r+"px; width : "+s.width+"px; z-index:999",o.dom.addClass(e,"fixing-box"),i.display="block",i.width=s.width+"px",i.height=s.height+"px",this.status=1},putback:function(){var t=this.el;o.dom.removeClass(t,"fixing-box"),t.style.position="static",this.agentNode.style.display="none",this.status=0,this.getStyle()},getStyle:function(){var t=o.dom,e=this.oldStyle,i=this.el;return i.offsetWidth>0&&(e.width=i.offsetWidth,e.height=i.offsetHeight,e.absolutePosition=t.getPosition(i)),e},createAgentNode:function(){var t=o.dom,e="tm-placeholder-"+this.guid,i=o.g(e);return i||(i=document.createElement("div"),i.id=e,t.insertBefore(i,this.el)),i.style.display="none",i},reposition:function(){var t=this;if(o.browser.ie&&o.browser.ie<7)return!1;var e=o.dom.getPosition(this.agentNode).left;if(e&&(this.el.style.left=e-1-o.page.getScrollLeft()+"px"),t.oldStyle.absolutePosition&&o.page.getScrollTop()>t.oldStyle.absolutePosition.top&&t.exTop>0){var i=o.browser.ie,s=this.el,l=this.oldStyle,d=s.parentNode;t.exTop=n(window).height()-270;var r=o.dom.getPosition(d).top+65+t.exTop,a=35+t.exTop;i&&7>i?(s.style.cssText+=";position : absolute;left:0!important;",s.style.cssText+="top : expression(documentElement.scrollTop - "+r+");",s.style.cssText+="width : "+l.width+"px"):s.style.cssText+=";position : fixed; top : "+a+"px; width : "+l.width+"px; z-index:999"}}}));i.exports.autofixed=l});
;define("wkview:widget/html_view/html_reader/js/topMessage.js",function(e,t,n){var i=e("wkcommon:widget/lib/tangram/base/base.js"),s=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,r=e("wkcommon:widget/ui/js_core/util/util.js"),o=e("wkview:widget/html_view/html_reader/js/config.js").config,a=e("wkview:widget/html_view/html_reader/js/setting.js").setting,l=(e("wkcommon:widget/lib/fis/data/data.js"),0);topMessage=s({Options:{toolsBar:"",readerContainer:""},_init:function(){var e=this;e.el=r.createDom('<div class="reader-top-message"><a class="reader-top-message-click" href="###"><b class="ic"></b>\u60a8\u4e0a\u4e00\u6b21\u9605\u8bfb\u5230\u6b64\u9875\uff0c\u70b9\u51fb\u8fd9\u91cc\u8fd4\u56de\u7b2c\u4e00\u9875</a><a href="###" class="ic reader-top-message-close"></a></div>'),e.closeEl=i.dom.q("reader-top-message-close",e.el,"a")[0],e.bindEvent(),e.render(),e.setPosition()},bindEvent:function(){var e=this;i.event.on(e.el,"mouseenter",i.fn.bind(e.timerClear,e)),i.event.on(e.el,"mouseleave",i.fn.bind(e.timerStart,e)),i.lang.eventCenter.addEventListener("Reader.fullScreenResize",i.fn.bind(e.resize,e),"topMessage.resize"),i.lang.eventCenter.addEventListener("Reader.zoomChange",i.fn.bind(e.resize,e),"topMessage.resize"),i.lang.eventCenter.addEventListener("Reader.WindowResize",i.fn.bind(e.resize,e),"topMessage.resize"),i.lang.eventCenter.addEventListener("InFullScreen.after",i.fn.bind(e.resize,e),"topMessage.resize"),i.lang.eventCenter.addEventListener("OutFullScreen.after",i.fn.bind(e.hide,e),"topMessage.hide"),i.lang.eventCenter.addEventListener("Reader.scroll",i.fn.bind(e.setPosition,e),"topMessage.setPosition"),i.event.on(e.el,"click",function(t){i.event.preventDefault(t),e.timerClear(),e.hide(),e.readerContainer.gotoPage(1)}),i.event.on(e.closeEl,"click",function(t){i.event.stop(t),e.hide()})},render:function(){var e=this;e.toolsBar.el.appendChild(e.el),e.setPosition(),e.resize(),e.show(),e.timerStart()},resize:function(){var e=this;a.isFullScreen?e._resizeInFullScreen():e._resizeInWindow(),e.setPosition()},_resizeInWindow:function(){var e=this,t=e.readerContainer.el.offsetWidth,n=o.pageDefaultWidth,i=t;t=n>t?n:t,e.el.style.width=i+"px"},_resizeInFullScreen:function(){var e=this,t=i.page.getViewWidth(),n=t>300?t-2+"px":"100%";e.el.style.width=n},setPosition:function(){var e=this,t=(i.dom.getPosition(e.el).top,i.page.getScrollTop()),n=e.readerContainer.pageList[0],s=i.dom.getPosition(n).top,r=i.dom.getPosition(e.toolsBar.el).top,o=i.page.getViewHeight(),a=e.toolsBar.el.offsetHeight,l=0;l=s>=t?r-s+1:o-a-43,e.el.style.top="-"+(l+"px")},timerStart:function(){var e=this;l=setTimeout(i.fn.bind(e.hide,e),1e4)},timerClear:function(){l?clearTimeout(l):!1},hide:function(){var e=this;i.dom.hide(e.el),e.dispose()},show:function(){var e=this;i.dom.show(e.el)},dispose:function(){var e=this;i.event.un(e.el,"mouseenter"),i.event.un(e.el,"mouseleave"),i.lang.eventCenter.removeEventListener("Reader.fullScreenResize","topMessage.resize"),i.lang.eventCenter.removeEventListener("Reader.WindowResize","topMessage.resize"),i.lang.eventCenter.removeEventListener("InFullScreen.after","topMessage.resize"),i.lang.eventCenter.removeEventListener("OutFullScreen.after","topMessage.hide"),i.lang.eventCenter.removeEventListener("Reader.scroll","topMessage.setPosition"),i.event.un(e.el,"click")}}),n.exports.topMessage=topMessage});
;define("wkview:widget/html_view/html_reader/js/free_hao123.js",function(o,i,a){var e=o("wkcommon:widget/lib/tangram/base/base.js"),t=o("wkcommon:widget/ui/js_core/widget/widget.js").widget,n=o("wkcommon:widget/ui/js_core/util/util.js"),s=o("wkcommon:widget/ui/js_core/log/log.js"),c=o("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,l=o("wkcommon:widget/ui/js_core/login/login.js").login,d=o("wkcommon:widget/ui/lib/jquery/jquery.js"),r=o("wkview:widget/ui/tools/hao123common/hao123common.js"),g=o("wkcommon:widget/lib/fis/data/data.js"),v=t||{},h={Options:{position:"centerRight",reader:{}},$iframe:{content:null},tpl:{downdoc:['<div class="dialog-container dialog-container-hao123">','   <div class="close-btn"></div>','   <div class="dialog-left-greenbar"></div>','   <div class="dialog-top">','       <p class="doc-title">\u514d\u8d39\u4e0b\u8f7d\u901a\u9053</p>',"   </div>",'   <div class="dialog-inner tac">','       <p class="info">\u606d\u559c\u60a8\uff01\u60a8\u5df2\u5b89\u88c5hao123\u6d4f\u89c8\u5668\uff0c\u83b7\u5f97\u4e00\u6b21\u514d\u8d39\u4e0b\u8f7d\u7279\u6743\uff01</p>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-downdoc"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d</b></a>',"   </div>","</div>"].join(""),hasDownDoc:['<div class="dialog-container dialog-container-hao123">','   <div class="close-btn"></div>','   <div class="dialog-left-greenbar"></div>','   <div class="dialog-top">','       <p class="doc-title">\u514d\u8d39\u4e0b\u8f7d\u901a\u9053</p>',"   </div>",'   <div class="dialog-inner tac">','       <p class="info">',"           \u606d\u559c\u60a8\uff01\u60a8\u5df2\u4f7f\u7528\u8fc7hao123\u514d\u8d39\u4e0b\u8f7d\u7279\u6743<br/>","           \u60f3\u514d\u8d39\u4e0b\u8f7d\u672c\u6587\uff1f","       </p>",'       <a href="/coupon/browse/buyvip?dqStatCode=" class="ui-bz-btn-senior log-xsend" data-logxsend="[1, 100427]" target="_blank">','           <b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u52a0\u5165VIP</b>',"       </a>","   </div>","</div>"].join(""),isSupportHao123:['<div class="dialog-container dialog-container-hao123">','   <div class="close-btn"></div>','   <div class="dialog-left-greenbar"></div>','   <div class="dialog-top">','       <p class="doc-title">\u514d\u8d39\u4e0b\u8f7d\u901a\u9053</p>',"   </div>",'   <div class="dialog-inner tac">','       <p class="info">\u606d\u559c\u60a8\uff01\u60a8\u5df2\u5b89\u88c5hao123\u6d4f\u89c8\u5668\uff0c\u83b7\u5f97\u4e00\u6b21\u514d\u8d39\u4e0b\u8f7d\u7279\u6743\uff01</p>','       <a href="javascript:;" class="ui-bz-btn-senior btn-diaolog-hasHao123"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u6253\u5f00</b></a>',"   </div>","</div>"].join(""),isSupportHao123False:['<div class="dialog-container dialog-container-hao123">','   <div class="close-btn"></div>','   <div class="dialog-left-greenbar"></div>','   <div class="dialog-top">','       <p class="doc-title">\u514d\u8d39\u4e0b\u8f7d\u901a\u9053</p>',"   </div>",'   <div class="dialog-inner tac">','       <p class="info">',"           <span><b>hao123\u6d4f\u89c8\u5668</b>\uff0c\u4e3a\u60a8\u63d0\u4f9b\u4e00\u6b21\u514d\u8d39\u4e0b\u8f7d\u673a\u4f1a</span><br/>","           \u6d3b\u52a8\u63d0\u793a\uff1a\u4e0b\u8f7d\u5e76\u6253\u5f00hao123\u6d4f\u89c8\u5668\uff0c\u767b\u5f55\u5373\u514d\u8d39\u4e0b\u8f7d\u5f53\u524d\u6587\u6863\u3002<br/>","       </p>",'       <a href="http://update.123juzi.net/dl3.php?edition=hao123_juzi_vbox&cid=96897094_o2_hao_&c=1111" class="ui-bz-btn-senior btn-diaolog-unHasHao123 log-xsend" data-logxsend="[1, 100426]"><b class="ui-bz-btn-p-16 ui-bz-btc">\u7acb\u5373\u4e0b\u8f7d\u6d4f\u89c8\u5668</b></a>',"   </div>","</div>"].join("")},init:function(){var o=this,i='<div class="reader-tools-btn-wrap-new free-hao123"><a class="ui-bz-btn free-hao123-inner" href="###"><b class="ui-btn-p-10 ui-btn-btc">\u514d\u8d39\u4e0b\u8f7d\u901a\u9053</b></a>&nbsp&nbsp</div>';o.el=n.createDom(i),o.clickEl=e.dom.q("free-hao123-inner",o.el,"a")[0],this.create()},addEventListener:function(){var o=this;this.$dialog.on("click",".close-btn",function(i){i.preventDefault(),o.close()}),this.$dialog.on("click",".btn-diaolog-close",function(i){i.preventDefault(),o.close()}),this.$dialog.on("click",".btn-diaolog-downdoc",function(i){i.preventDefault(),s.xsend(1,100424),e.lang.eventCenter.dispatchEvent("download.hao123.toGetFile"),o.close()}),this.$dialog.on("click",".btn-diaolog-hasHao123",function(i){i.preventDefault(),s.xsend(1,100425),r.callBrowser(o.docUrl),o.close()}),this.$dialog.on("click",".btn-diaolog-unHasHao123",function(){r.monitorBrowser(o.docUrl),o.close()})},create:function(){var o=this,i=-1===window.navigator.userAgent.toLowerCase().indexOf("windows")?!1:!0;i&&(this.docUrl=window.location.href,d.ajax({url:"/activity/interface/hao123downbutton",type:"get",cache:!1}).done(function(i){i&&0===i.data.code&&(d(o.el).addClass("free-hao123-show"),e.event.on(o.clickEl,"click",function(i){e.event.preventDefault(i),s.xsend(1,100423);var a=g.get("WkInfo")||{},t=a.PageInfo.isLogin;t||e.cookie.set("wk_hao123","1",{expires:2592e6,path:"/"}),l.verlogin(function(){o.show()},null,null,null,!1)}))}))},creatDialog:function(o){var i=d('<div id="wkDialogFreeDown" class="WkDialogDownDoc">'+this.tpl[o]+"</div>"),a=d('<div class="dialog-container-iframe"><iframe allowTransparency="true" src="" frameborder="0" scrolling="no"></iframe></div>');if(this.$dialog=i,i.appendTo(d("body")),null==this.$iframe.content&&(this.$iframe.content=a,i.after(a)),this.addEventListener(),"1"===e.cookie.get("wk_hao123")){var t=g.get("WkInfo")||{};t.PageInfo.isLogin&&(e.cookie.set("wk_hao123","false",{expires:2592e6,path:"/"}),this.show())}},checkHasDownloadDoc:function(o){var i=!1,a=this;d.ajax({url:"/activity/interface/hao123downstatus",type:"get",cache:!1}).done(function(e){e&&0===e.status.code&&(i=1===+e.data.proc_status?!0:!1);var t=r.exist(),n=r.checkRunOnJuzi();return i?(a.creatDialog("hasDownDoc"),void o()):n?(a.creatDialog("downdoc"),void o()):t?(a.creatDialog("isSupportHao123"),void o()):t?void 0:(a.creatDialog("isSupportHao123False"),void o())})},close:function(){this.$dialog.css("display","none"),this.$iframe.content.css("display","none")},show:function(){var o=this;o.checkHasDownloadDoc(function(){var i=d(window).height(),a=d(document).scrollTop();o.$iframe.content.css({height:d("body").height()}).show(),o.$dialog.css("top",a+i/2-150).show()})}};h._init=h.init,h=v(h,{superClass:c}),a.exports.freeHao123=h});
;define("wkview:widget/html_view/html_reader/js/free_ad.js",function(e,i,a){var n=e("wkcommon:widget/lib/tangram/base/base.js"),t=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,o=e("wkcommon:widget/ui/js_core/util/util.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),s=e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem,l=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkcommon:widget/ui/js_core/login/login.js").login,e("wkcommon:widget/lib/fis/data/data.js")),r=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=(e("wkcommon:widget/ui/js_core/_dialog/_dialog.js").alert,e("wkcommon:widget/ui/js_core/_dialog/_dialog.js").dialogCreate);free_ad=t({Options:{position:"centerRight",reader:{}},_init:function(){var e=this,i=l.get("WkInfo").DocInfo,a='<div class="reader-tools-btn-wrap-new free-ad"><a class="ui-bz-btn-senior free-ad-inner" href="###"><b class="ui-btn-p-10 ui-btn-btc">'+(i.isPaymentDoc?"\u514d\u8d39\u4e0b\u8f7d\u901a\u9053":"\u514d\u4e0b\u8f7d\u5238\u901a\u9053")+"</b></a>"+(i.isPaymentDoc?"":"&nbsp&nbsp")+"</div>";e.aboutAdBtn(),e.el=o.createDom(a),e.clickEl=n.dom.q("free-ad-inner",e.el,"a")[0],e.bindEvent()},bindEvent:function(){var e=this,i=l.get("WkInfo").DocInfo;n.event.on(e.clickEl,"click",function(a){e.org_id&&d.xsend(1,100218,{org_id:e.org_id}),a=a||window.event,n.event.preventDefault(a);n.event.getTarget(a);e.ad_dialog=c({innerId:"ad_dialog",content:['<div id="ad_layer">','<div class="ad_title">',"<p>"+(i.isPaymentDoc?"\u514d\u8d39\u4e0b\u8f7d\u901a\u9053":"\u514d\u4e0b\u8f7d\u5238\u901a\u9053")+"</p>",'<span class="dialog-close"></span>',"</div>",'<div class="ad_content">','<p class="organization">',"    <strong>"+e.org_name+'</strong>\u4e3a\u60a8\u63d0\u4f9b<span class="num">1</span>\u6b21\u514d\u8d39\u4e0b\u8f7d\u673a\u4f1a',"</p>",'<p class="intro">\u8f93\u5165\u5e38\u7528\u90ae\u7bb1\uff0c\u5373\u53ef\u83b7\u5f97\u514d\u8d39\u4e0b\u8f7d\u94fe\u63a5\uff0c\u8ba2\u9605\u673a\u6784\u4f18\u60e0\u4fe1\u606f</p>','<form action="/org/submit/send_email" method="post">',"    <div>","        <label>\u90ae\u7bb1\uff1a</label>",'        <input name="email" type="input" class="mail_ipt" value="'+e.email+'">',"    </div>",'    <div class="tips">',"        <label>&nbsp;</label>","        <span>\u683c\u5f0f\u5982\uff1awenku@baidu.com</span>","    </div>",'    <div class="ad_agree">',"        <label>&nbsp;</label>",'        <input type="checkbox"><span>\u6211\u540c\u610f\u90ae\u4ef6\u8ba2\u9605'+e.org_name+"\u7684\u4f18\u60e0\u4fe1\u606f</span>","    </div>",'    <div class="commit_btn">','        <a class="ui-bz-btn-senior disabled">','            <b class="ui-btn-p-10">\u83b7\u53d6\u4e0b\u8f7d\u94fe\u63a5</b>',"        </a>","    </div>","</form>","</div>","</div>"].join(""),hasTitle:!1,width:475,height:315}),r(e.ad_dialog.el).on("change",".ad_agree input[type=checkbox]",function(){r(this).is(":checked")?r(".commit_btn .ui-bz-btn-senior").removeClass("disabled"):r(".commit_btn .ui-bz-btn-senior").addClass("disabled")}),r(e.ad_dialog.el).on("blur",".mail_ipt",function(){var e=r(".ad_content .mail_ipt").val().trim();return e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void r(".ad_content .tips").removeClass("mail_err").find("span").html(""):void r(".ad_content .tips").addClass("mail_err").find("span").html("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"):void r(".ad_content .tips").addClass("mail_err").find("span").html("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a")}),r(e.ad_dialog.el).on("click",".commit_btn",function(){if(!r(".ui-bz-btn-senior").is(".disabled")){var a=r(".ad_content .mail_ipt").val().trim();if(!a)return void r(".ad_content .tips").addClass("mail_err").find("span").html("\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a");if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a))return void r(".ad_content .tips").addClass("mail_err").find("span").html("\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e");r(".ad_content .tips").removeClass("mail_err").find("span").html(""),e.org_id&&d.xsend(1,100219,{org_id:e.org_id}),0==r('.ad_content form input[name="doc_id"]').length&&r(".ad_content form").append(r('<div><input name="doc_id" value="'+i.docId+'" /></div>').hide()),r(".ad_content form").submit()}})})},aboutAdBtn:function(){var e=this,i=l.get("WkInfo").DocInfo;r.getJSON("/org/interface/offer",{doc_id:i.docId}).success(function(i){0==i.errno&&(r(e.el).addClass("free_ad_show"),r(".reader-tools-zoom").css("right","400px"),r(".reader-tools-bar").find(".reader-fullScreen").css("right","355px"),e.org_name=i.org_name,e.org_id=i.org_id,e.email=i.email,setTimeout(function(){r(".pack-pay").hide()},500),e.org_id&&d.xsend(1,100217,{org_id:e.org_id}),r(".reader-tools-bar-wrap").on("click",".download-btn .reader-download",function(){d.xsend(1,100220)}))}).fail(function(){})}},{superClass:s}),a.exports.free_ad=free_ad});
;define("wkview:widget/html_view/html_reader/js/teacher_free.js",function(e,t,i){var o=e("wkcommon:widget/lib/tangram/base/base.js"),n=e("wkcommon:widget/ui/js_core/widget/widget.js").widget,r=e("wkcommon:widget/ui/js_core/util/util.js"),s=(e("wkcommon:widget/ui/js_core/log/log.js"),e("wkview:widget/html_view/html_reader/js/toolsItem.js").toolsItem),a=(e("wkview:widget/html_view/html_reader/js/config.js").config,e("wkview:widget/html_view/html_reader/js/setting.js").setting,e("wkcommon:widget/ui/js_core/login/login.js").login,e("wkcommon:widget/lib/fis/data/data.js")),c=e("wkcommon:widget/ui/lib/jquery/jquery.js");teacher_free_download=n({Options:{position:"centerRight",reader:{}},_init:function(){var e=this,t=a.get("WkInfo").DocInfo,i='<div class="reader-tools-btn-wrap-new teacher-free"><a class="ui-bz-btn-senior teacher-free-inner" href="###"><b class="ui-btn-p-10 ui-btn-btc">\u6559\u5e08\u514d\u8d39\u4e0b\u8f7d</b></a>'+(t.isPaymentDoc?"":"&nbsp&nbsp")+"</div>";setTimeout(function(){c(".reader-tools-zoom").css("right","400px"),c(".reader-tools-bar").find(".reader-fullScreen").css("right","355px")},300),e.el=r.createDom(i),e.clickEl=o.dom.q("teacher-free-inner",e.el,"a")[0],e.bindEvent()},bindEvent:function(){var e=this,t=a.get("WkInfo").teacher_free_download;o.event.on(e.clickEl,"click",function(){window.location=t})}},{superClass:s}),i.exports.teacher_free_download=teacher_free_download});
;define("wkview:widget/html_view/html_reader/js/viewlog.js",function(o,e,i){var d=o("wkcommon:widget/lib/tangram/base/base.js"),n=o("wkcommon:widget/lib/fis/data/data.js");Log=o("wkcommon:widget/ui/js_core/log/log.js"),util=o("wkcommon:widget/ui/js_core/util/util.js");var t=n.get("WkInfo").DocInfo,c={cid1:t.cid1,cid2:t.cid2,cid3:t.cid3,cid4:t.cid4,docId:t.docId,doctype:t.docType};console.log("WkInfo",WkInfo,WkInfo.DocInfo);var g=function(){d.lang.eventCenter.addEventListener("view-log",function(o,e){var i=e.method||"send",d=e.args||[];("send"===i||"nslog"===i)&&d.length>2&&util.mix(d[2]||{},c,!0),Log[i]&&Log[i].apply(this,d)})}();i.exports.ViewLog=g});